var LZString=function(){function f(h,e){if(!b[h]){b[h]={};for(var i=0;i<h.length;i++){b[h][h.charAt(i)]=i}}return b[h][e]}var c=String.fromCharCode,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",b={},a={compressToBase64:function(h){if(null==h){return""}var e=a._compress(h,6,function(i){return g.charAt(i)});switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:a._decompress(e.length,32,function(h){return f(g,e.charAt(h))})},compressToUTF16:function(e){return null==e?"":a._compress(e,15,function(h){return c(h+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:a._decompress(e.length,16384,function(h){return e.charCodeAt(h)-32})},compressToUint8Array:function(l){for(var j=a.compress(l),m=new Uint8Array(2*j.length),k=0,h=j.length;h>k;k++){var i=j.charCodeAt(k);m[2*k]=i>>>8,m[2*k+1]=i%256}return m},decompressFromUint8Array:function(k){if(null===k||void 0===k){return a.decompress(k)}for(var l=new Array(k.length/2),j=0,h=l.length;h>j;j++){l[j]=256*k[2*j]+k[2*j+1]}var i=[];return l.forEach(function(e){i.push(c(e))}),a.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,function(h){return d.charAt(h)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),a._decompress(e.length,32,function(h){return f(d,e.charAt(h))}))},compress:function(e){return a._compress(e,16,function(h){return c(h)})},_compress:function(q,j,w){if(null==q){return""}var C,I,z,J={},k={},H="",E="",F="",y=2,B=3,A=2,D=[],x=0,G=0;for(z=0;z<q.length;z+=1){if(H=q.charAt(z),Object.prototype.hasOwnProperty.call(J,H)||(J[H]=B++,k[H]=!0),E=F+H,Object.prototype.hasOwnProperty.call(J,E)){F=E}else{if(Object.prototype.hasOwnProperty.call(k,F)){if(F.charCodeAt(0)<256){for(C=0;A>C;C++){x<<=1,G==j-1?(G=0,D.push(w(x)),x=0):G++}for(I=F.charCodeAt(0),C=0;8>C;C++){x=x<<1|1&I,G==j-1?(G=0,D.push(w(x)),x=0):G++,I>>=1}}else{for(I=1,C=0;A>C;C++){x=x<<1|I,G==j-1?(G=0,D.push(w(x)),x=0):G++,I=0}for(I=F.charCodeAt(0),C=0;16>C;C++){x=x<<1|1&I,G==j-1?(G=0,D.push(w(x)),x=0):G++,I>>=1}}y--,0==y&&(y=Math.pow(2,A),A++),delete k[F]}else{for(I=J[F],C=0;A>C;C++){x=x<<1|1&I,G==j-1?(G=0,D.push(w(x)),x=0):G++,I>>=1}}y--,0==y&&(y=Math.pow(2,A),A++),J[E]=B++,F=String(H)}}if(""!==F){if(Object.prototype.hasOwnProperty.call(k,F)){if(F.charCodeAt(0)<256){for(C=0;A>C;C++){x<<=1,G==j-1?(G=0,D.push(w(x)),x=0):G++}for(I=F.charCodeAt(0),C=0;8>C;C++){x=x<<1|1&I,G==j-1?(G=0,D.push(w(x)),x=0):G++,I>>=1}}else{for(I=1,C=0;A>C;C++){x=x<<1|I,G==j-1?(G=0,D.push(w(x)),x=0):G++,I=0}for(I=F.charCodeAt(0),C=0;16>C;C++){x=x<<1|1&I,G==j-1?(G=0,D.push(w(x)),x=0):G++,I>>=1}}y--,0==y&&(y=Math.pow(2,A),A++),delete k[F]}else{for(I=J[F],C=0;A>C;C++){x=x<<1|1&I,G==j-1?(G=0,D.push(w(x)),x=0):G++,I>>=1}}y--,0==y&&(y=Math.pow(2,A),A++)}for(I=2,C=0;A>C;C++){x=x<<1|1&I,G==j-1?(G=0,D.push(w(x)),x=0):G++,I>>=1}for(;;){if(x<<=1,G==j-1){D.push(w(x));break}G++}return D.join("")},decompress:function(e){return null==e?"":""==e?null:a._decompress(e.length,32768,function(h){return e.charCodeAt(h)})},_decompress:function(B,C,I){var r,F,x,z,q,K,L,E,H=[],G=4,J=4,D=3,k="",j=[],y={val:I(0),position:C,index:1};for(F=0;3>F;F+=1){H[F]=F}for(z=0,K=Math.pow(2,2),L=1;L!=K;){q=y.val&y.position,y.position>>=1,0==y.position&&(y.position=C,y.val=I(y.index++)),z|=(q>0?1:0)*L,L<<=1}switch(r=z){case 0:for(z=0,K=Math.pow(2,8),L=1;L!=K;){q=y.val&y.position,y.position>>=1,0==y.position&&(y.position=C,y.val=I(y.index++)),z|=(q>0?1:0)*L,L<<=1}E=c(z);break;case 1:for(z=0,K=Math.pow(2,16),L=1;L!=K;){q=y.val&y.position,y.position>>=1,0==y.position&&(y.position=C,y.val=I(y.index++)),z|=(q>0?1:0)*L,L<<=1}E=c(z);break;case 2:return""}for(H[3]=E,x=E,j.push(E);;){if(y.index>B){return""}for(z=0,K=Math.pow(2,D),L=1;L!=K;){q=y.val&y.position,y.position>>=1,0==y.position&&(y.position=C,y.val=I(y.index++)),z|=(q>0?1:0)*L,L<<=1}switch(E=z){case 0:for(z=0,K=Math.pow(2,8),L=1;L!=K;){q=y.val&y.position,y.position>>=1,0==y.position&&(y.position=C,y.val=I(y.index++)),z|=(q>0?1:0)*L,L<<=1}H[J++]=c(z),E=J-1,G--;break;case 1:for(z=0,K=Math.pow(2,16),L=1;L!=K;){q=y.val&y.position,y.position>>=1,0==y.position&&(y.position=C,y.val=I(y.index++)),z|=(q>0?1:0)*L,L<<=1}H[J++]=c(z),E=J-1,G--;break;case 2:return j.join("")}if(0==G&&(G=Math.pow(2,D),D++),H[E]){k=H[E]}else{if(E!==J){return null}k=x+x.charAt(0)}j.push(k),H[J++]=x+k.charAt(0),G--,x=k,0==G&&(G=Math.pow(2,D),D++)}}};return a}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString);function SimplePush(c,a){window.WebSocket=window.WebSocket||window.MozWebSocket;var b=new Object;b.reconnectCount=0;b.wsReconnectCount=0;b.options=$.extend({debug:false,reconnectInterval:10000,reconnectLimit:3,wsdowngradeLimit:3,pollingTimeout:30000,compress:false},a);b.debug=b.options.debug||false;b.forOpen=function(){};b.forMessage=function(f){};b.forError=function(f){};b.forClose=function(){};b.forReconnect=function(f){};b.forChangeTransport=function(){};b.sid=null;b.host=c;b.log=function(g){if(!b.debug){return}try{console.log("["+(new Date()).toLocaleString()+"]");console.log(g)}catch(f){}};b.encodeURIData=function(f){if(b.options.compress){f=LZString.compressToEncodedURIComponent(f)}return f};b.decodeURIData=function(f){if(b.options.compress){f=LZString.decompressFromEncodedURIComponent(f)}return f};var d=function(f){f.ws=null;f.transport="websocket";f.reconnect=function(){if(f.reconnectCount<f.options.reconnectLimit){setTimeout(function(){f.reconnectCount++;f.wsReconnectCount++;f.forReconnect(f.reconnectCount);f.ws=g(f)},f.options.reconnectInterval)}else{f.forClose()}};var g=function(i){window.WebSocket=window.WebSocket||window.MozWebSocket;if(window.WebSocket){i.wshost="ws://"+i.host+"/websocket";var h=new WebSocket(i.wshost);h.onopen=function(){i.reconnectCount=0;i.connect()};h.onerror=function(j){i.forError(j)};h.onmessage=function(k){var j=JSON.parse(k.data);if(j.state==0){i.sid=j.json;i.forOpen()}else{if(j.state==1){i.forMessage(i.decodeURIData(j.json))}}};h.onclose=function(j){i.forClose();if(i.wsReconnectCount>=i.options.wsdowngradeLimit){i.ws=null;i.forChangeTransport();i.reconnectCount=0;return e(i)}i.reconnect()}}return h};f.ws=g(f);f.doSendMessage=function(h){if(window.WebSocket&&f.ws.readyState==WebSocket.OPEN){f.ws.send(JSON.stringify(h))}};f.sendMessage=function(h){var i={state:1,json:f.encodeURIData(h)};f.doSendMessage(i)};f.connect=function(){var h={state:0,json:{isCompress:f.options.compress}};f.doSendMessage(h)};return f};var e=function(f){f.transport="";f.pdata={type:"down",isCompress:f.options.compress};f.pollingAjaxOption={data:f.pdata,async:true,cache:false,dataType:"jsonp",contentType:"application/json;charset=utf-8",jsonpCallback:"pollingCallbackFunc",timeout:f.options.pollingTimeout,crossDomain:true};f.abort=false;f.pollingReady=false;f.transport="polling";f.reconnect=function(){if(f.reconnectCount<f.options.reconnectLimit){setTimeout(function(){f.reconnectCount++;f.forReconnect(f.reconnectCount);f.pdata.sid=0;f.pollingOpen()},f.options.reconnectInterval)}else{f.forClose()}};f.pollingOpen=function(){f.pollinghost="http://"+f.host+"/polling";f.pollingAjaxOption.url=f.pollinghost;$.ajax(f.pollingAjaxOption).done(function(h){f.reconnectCount=0;f.pollingReady=true;f.log(h);if(h.state==0){f.sid=h.json;f.pdata.pd={state:0};f.pdata.sid=h.json}else{f.pdata.pd={state:2};if(h.state==5){f.forOpen()}if(h.state==1){try{setTimeout(function(){if($.isArray(h.json)){$.each(h.json,function(j,i){f.forMessage(f.decodeURIData(i))})}else{f.forMessage(f.decodeURIData(h.json))}},0)}catch(g){f.log(g)}}if(h.state==4){f.forClose();return}}if(f.abort){f.log("disconnect!");f.pollingSendOp(4,"close");f.forClose()}else{f.pollingOpen()}}).fail(function(g,i,h){f.pollingReady=false;f.log(h);f.forError(h);f.reconnect()})};f.pollingSendOp=function(g,i){var h={pd:JSON.stringify({state:g,json:i}),isCompress:f.options.compress};$.ajax({url:f.pollinghost+"?type=up&sid="+f.sid,data:h,async:true,cache:false,dataType:"jsonp",contentType:"application/json;charset=utf-8",crossDomain:true}).done(function(j){f.log(j)}).fail(function(j,l,k){f.log(j);f.forError(j)})};f.sendMessage=function(g){if(f.sid==null){f.forError("sid is null")}else{if(!f.pollingReady){f.forError("polling is not ready")}else{f.pollingSendOp(1,f.encodeURIData(g))}}};f.connect=function(){setTimeout(function(){f.pollingOpen()},0)};f.disconnect=function(){f.abort=true};f.connect();return f};if(window.WebSocket){return d(b)}else{return e(b)}}window.pushReponseFunctions={test:function(a){PushService.pushLog("["+(new Date()).toLocaleString()+"]"+a)}};window.currentUid=window.NAV_UTIL.isLogin()?window.NAV_UTIL.getUserInfo().yyID:"";var PushService={attemptCount:0,pushOption:{debug:false},pushOpen:function(a){},pushError:function(a){},pushGetMessage:function(a){},pushClose:function(){},pushReconnect:function(a){},pushChangeTransport:function(){},init:function(){if(window.PUSH_ENABLE){this.getChannelIp()}},getChannelIp:function(){var a=this;$.ajax({url:window.PUSH_PROXY_URL+"addressService",type:"GET",dataType:"jsonp",timeout:3000,success:function(b){if(b.status==200){a.initSimplePush(b.data)}else{if(a.attemptCount<2){a.attemptCount++;a.getChannelIp()}}}}).fail(function(){if(a.attemptCount<2){a.attemptCount++;a.getChannelIp()}})},pushLog:function(){try{window.console&&console.log&&console.log.apply(console,arguments)}catch(a){}},callFunc:function(returnJson){if(typeof returnJson!="undefined"){if(typeof returnJson.event!="undefined"){if(window.pushReponseFunctions[returnJson.event]){window.pushReponseFunctions[returnJson.event](returnJson.data)}else{try{eval(returnJson.event)(returnJson.data)}catch(err){if(err.name=="ReferenceError"&&err.message==returnJson.event+" is not defined"){if(this.pushOption.debug){this.pushLog("function not defined")}}else{throw err}}}}}},unix_to_datetime:function(a){var b=new Date(parseInt(a)*1000);return b.toLocaleString()},stat:function(a){$.ajax({url:window.PUSH_PROXY_URL+"statService",type:"POST",dataType:"jsonp",data:a,success:function(b){}})},initSimplePush:function(f){var c={debug:false,reconnectInterval:30000,reconnectLimit:20,wsdowngradeLimit:10,pollingTimeout:60000,compress:true};$.extend(c,this.pushOption);var b=SimplePush(f,c);var e=0;var d=0;var a=this;b.forOpen=function(){a.pushLog("["+(new Date()).toLocaleString()+"]simplepush\u6210\u529f\u8fde\u63a5!");d=Date.parse(new Date());e=b.sid;a.pushOpen(b)};b.forError=function(g){a.pushLog("["+(new Date()).toLocaleString()+"]simplepush\u9519\u8bef");a.pushError(g)};b.forMessage=function(g){if(typeof g!="undefined"){if(typeof(g)=="string"){g=JSON.parse(g)}a.callFunc(g);a.pushGetMessage(g)}};b.forClose=function(){a.pushLog("["+(new Date()).toLocaleString()+"]simplepush\u5173\u95ed");a.pushClose()};b.forReconnect=function(g){a.pushLog("["+(new Date()).toLocaleString()+"]simplepush\u91cd\u8fde:"+g);a.stat({type:"simplepushreconnect",reconnectTime:g,transport:b.transport,sid:e,uid:window.currentUid,serverhost:f,connectingTime:d});d=0;a.pushReconnect(g)};b.forChangeTransport=function(){a.pushLog("["+(new Date()).toLocaleString()+"]simplepush\u534f\u8bae\u8f6c\u6362");a.stat({type:"simplepushChangeTransport",transport:b.transport,sid:e,uid:window.currentUid,serverhost:f,connectingTime:d});d=0;a.pushChangeTransport()}}};
