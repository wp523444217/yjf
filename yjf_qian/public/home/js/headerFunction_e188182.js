function zhReport(e){if("undefined"==typeof YA)return!1;var e=e||{},t={pro:"huya_web",pas:YA.cookie.get("username")||"",yyuid:YA.cookie.get("yyuid")||"",pageType:"root",rso:"",rso_desc:"",eid:"",eid_desc:""},n=function(e,t,n,i,a){var o=e+"="+t+"; domain="+n+"; path="+i;a>0&&(o=o+"; expires="+a.toGMTString()),document.cookie=o};for(var i in e)t[i]=e[i];"undefined"==typeof ya&&(window.ya=new YA(t.pro,t.pas,{pageType:t.pageType,yyuid:t.yyuid}),ya.reportProductStartUp({pro:t.pro,rso:t.rso,rso_desc:t.rso_desc,ref:YA.cookie.get("ya_eid")}),ya.startProductHeartbeat({pro:t.pro,rso:t.rso,ref:YA.cookie.get("ya_eid"),rso_desc:t.rso_desc}),ya.reportProductEvent({eid:t.eid,eid_desc:t.eid_desc,rso:t.rso,rso_desc:t.rso_desc,ref:YA.cookie.get("ya_eid")}),TT.emit("reportReady"),$("body").on("click",".clickstat",function(){var e="";$(this).attr("href")&&(e=$(this).attr("eid").substring(6),n("ya_eid",e,TT.domainForWriteCookie,"/")),ya.reportProductEvent({eid:$(this).attr("eid"),eid_desc:$(this).attr("eid_desc"),ref:YA.cookie.get("ya_eid")})}),$("body").on("click",".new-clickstat",function(){var e="",t=$(this);try{var i=$.parseJSON(t.attr("report"));$(this).attr("href")&&(e=i.position,n("ya_eid",e,TT.domainForWriteCookie,"/")),i.ref=YA.cookie.get("ya_eid"),ya.reportProductEvent(i)}catch(a){}}))}function parseQueryString(e){var t,n={};if(-1!=(t=e.indexOf("?")))for(var i=e.substring(t+1,e.length),a=i.split("&"),o=[],r=0,s=a.length;s>r;r++)o=a[r].split("="),n[o[0]]=o[1];return n}window.TT={},TT.domainForWriteCookie="huya.duowan.com"==location.host?"duowan.com":"huya.com",TT.type=0,function(){try{for(var e=location.search.slice(1),t=e.split("&"),n=0,i=t.length;i>n;n++){var a=t[n].split("=");if("TTTYPE"===a[0].toUpperCase()&&a[1])return TT.type=parseInt(a[1],10)||TT.type}}catch(o){}}(),TT.isProd=!TT.type,TT.debug=!TT.isProd,TT.log=function(){try{if(TT.debug||localStorage.getItem("TT_DEBUG"))return console.log.apply(console,arguments)}catch(e){}},TT.app={main:"http://www.huya.com/",i:"http://i.huya.com/"},TT.use$=function(){var e=[],t=function(){return window.jQuery},n=t(),i=null;return n||(i=setInterval(function(){if(n=t())for(clearInterval(i);e.length;)e.shift()(n)},100)),function(t){"function"==typeof t&&(n?t(n):e.push(t))}}(),!function(){var e={},t={},n=-1;e.publish=function(e){var n=arguments;t[e]||(t[e]={published:!1,data:null,subscribers:[]});var i=t[e];i.published=!0,i.data=Array.prototype.slice.call(n);for(var a=i.subscribers.length,o=null;a--;)o=i.subscribers[a],o.func.apply(o,n);return!0},e.subscribe=function(e,i,a){if("function"!=typeof i)return-1;t[e]||(t[e]={published:!1,data:null,subscribers:[]});var o=(++n).toString(),r={token:o,func:i};return t[e].subscribers.push(r),a&&t[e].published&&i.apply(r,t[e].data),o},e.unsubscribe=function(e){for(var n in t)if(t.hasOwnProperty(n))for(var i=t[n].subscribers,a=0,o=i.length;o>a;a++){var r=i[a];if(r.token===e)return i.splice(a,1),e}return!1},TT.on=function(){e.subscribe.apply(e,arguments)},TT.off=function(){e.unsubscribe.apply(e,arguments)},TT.emit=function(){e.publish.apply(e,arguments)},window.DUYA_SUB=e}(),!function(e){e.HUYA_UTIL={trim:function(e){var t=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;return(e||"").replace(t,"")},xssFilter:function(e){return"string"!=typeof e?e:e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},createStyleSheet:function(e){var t;return document.createStyleSheet?(t=document.createStyleSheet(),t.cssText=e):(t=document.createElement("style"),t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)),t},deleteCookie:function(e,t,n){if(this.hasCookie(e)){var i=new Date;i.setTime(i.getTime()-864e5),document.cookie=e+"=_; expires="+i.toGMTString()+"; domain="+t+"; path="+n}},writeCookie:function(e,t,n,i,a){var o=e+"="+t+"; domain="+n+"; path="+i;a>0&&(o=o+"; expires="+a.toGMTString()),document.cookie=o},hasCookie:function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t)return!0}return!1},getCookieVal:function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n+=1){var i=t[n].split("=");if(i[0]==e)return decodeURIComponent(i[1])}return""},getScript:function(e,t){function n(){o.onload=o.onreadystatechange=null,o=null,"function"==typeof t&&t()}var i=document,a=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=i.createElement("script");"onload"in o?o.onload=n:o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()},o.charset="utf-8",o.type="text/javascript",o.async=!0,o.src=e,a.appendChild(o)},throttle:function(e,t){function n(){o=arguments,r=this,a||(a=setTimeout(function(){a=null,e.apply(r,o),r=o=null},i?0:t),i&&(i=!1))}var i=!0,a=null,o=null,r=null;return n.cancel=function(){clearTimeout(a),a=r=o=null},n},debounce:function(e,t,n){var i=null,a=function(){i&&clearTimeout(i);var a=this,o=arguments;return n?(i||e.apply(a,o),i=setTimeout(function(){i=null},t)):i=setTimeout(function(){i=null,e.apply(a,o)},t),a};return a.cancel=function(){clearTimeout(i),i=null},a},isMobile:function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?!0:!1}()}}(window),!function(e){e.webpReg=/\/yysnapshot\//,e.webpSuffix="/format/webp",e.isSupportWebp=function(){var e=document.createElement("canvas");return e.getContext&&e.getContext("2d")?0===e.toDataURL("image/webp").indexOf("data:image/webp"):!1}()}(window),!function(e,t){e.huya_crossStorage=TT.store=t()}(this,function(){function e(e,t,n){var i={sign:l,type:e,data:t};if("function"==typeof n){var a="cs_"+(new Date).getTime();i.token=a,r[a]=n}try{i=JSON.stringify(i)}catch(s){return}o(function(e){e.postMessage(i,"*")})}function t(e){if(/\.huya\.com$/.test(e.origin)){var t=null;try{t=JSON.parse(e.data)}catch(n){}if(t&&t.sign===l&&t.token)if("STORE_CHANGE"===t.token)for(var i=0,a=s.length;a>i;i++)s[i](t.data);else r[t.token](t.data)}}var n={setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){},change:function(){}},i="postMessage"in window,a="localStorage"in window;if(!i)return a&&(n=localStorage),n;var o=function(){var e=null,t=null,n=!1,i=[],a=function(){n=!0,t=e.contentWindow;for(var a=0,o=i.length;o>a;a++)i[a](t)};return function(o){e||(e=document.createElement("iframe"),e.style.display="none",document.body.insertBefore(e,document.body.firstChild),e.attachEvent?e.attachEvent("onload",a):e.onload=a,e.src="http://hd.huya.com/proxy/storage.html"),"function"==typeof o&&(n?o(t):i.push(o))}}(),r={},s=[],l="CROSS_STORAGE";return"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t),n.setItem=function(t,n){if("string"==typeof t){var i={};i[t]=n,e("set",i)}},n.getItem=function(t,n){"string"==typeof t&&e("get",t,n)},n.removeItem=function(t){"string"==typeof t&&e("del",t)},n.clear=function(){e("del")},n.change=function(e){"function"==typeof e&&(s.push(e),o())},n}),TT.use$(function(e){function t(){this.initialize.apply(this,arguments)}t.prototype={initialize:function(){var t=null,n=this;if(t=window.localStorage.getItem("header/ads"))try{t=JSON.parse(t),n.createImage(t)}catch(i){}e(window).on("load",function(){setTimeout(function(){n.ajaxGetAds()},500)})},createImage:function(t){e("#J_duyaHdGg").html('<a href="'+t.link+'" title="'+t.title+'" target="_blank"><img src="'+t.picUrl+'" alt="'+t.title+'" /></a>')},ajaxGetAds:function(){var t=TT.app.main+"/cache10min.php?m=Ad&do=ajaxGetAds&type=4&area=24&num=1";HUYA_UTIL.isMobile&&(t=TT.app.main+"/cacheapp.php?m=Ad&do=ajaxGetAds&type=4&area=24&num=1"),e.ajax({url:t,dataType:"jsonp",jsonpCallback:"huyaNavAd",cache:!0}).done(function(e){if(1e3==e.status)if(e.data&&e.data.length){var t=e.data[0];window.localStorage.setItem("header/ads",JSON.stringify(t))}else window.localStorage.removeItem("header/ads");else window.localStorage.removeItem("header/ads"),TT.log("\u83b7\u53d6\u5934\u90e8\u5e7f\u544a\u6570\u636e\u5931\u8d25\uff1a"+e.msg)})}},DUYA_SUB.subscribe("huyaHeaderDomReady",function(){new t},!0)}),!function(){function e(e){var n=document.body.className.replace(/(^[\s\t\xa0\u3000]+|[\s\t\xa0\u3000]+$)/g,""),i=n?document.body.className.split(/\s+/):[],a=t(i,"w-1000");1===e?-1!=a&&(i.splice(a,1),document.body.className=i.join(" ")):-1==a&&(i.push("w-1000"),document.body.className=i.join(" "))}var t=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},n=document.documentElement?document.documentElement:document.body,i=function(){var e=n.clientWidth;return e>=1480?1:0},a=i();e(a);var o=null,r=function(){clearTimeout(o),o=setTimeout(function(){var t=i();t!==a&&e(a=t)},60)};window.addEventListener?window.addEventListener("resize",function(){r(),DUYA_SUB.publish("resizeWide",n.clientWidth)},!1):window.attachEvent&&window.attachEvent("onresize",function(){r(),DUYA_SUB.publish("resizeWide",n.clientWidth)})}(),TT.use$(function(e){function t(){this.initialize.apply(this,arguments)}t.prototype={initialize:function(){var t=null,n=this;if(n.input=e("#searchForm_id input"),t=window.localStorage.getItem("header/placeholder"))try{n.setVal(t)}catch(i){}e(window).on("load",function(){setTimeout(function(){n.ajaxGetPlaceholder()},500)})},setVal:function(e){this.val=e,this.input.val(this.val),this.bind()},ajaxGetPlaceholder:function(){var t=TT.app.main+"/cache10min.php?m=Search&do=getHotword&v=2";HUYA_UTIL.isMobile&&(t=TT.app.main+"/cacheapp.php?m=Search&do=getHotword&v=2"),e.ajax({type:"get",url:t,dataType:"jsonp",jsonpCallback:"huyaNavPlaceholder",cache:!0}).done(function(e){e&&e[0]?window.localStorage.setItem("header/placeholder",e[0]):window.localStorage.removeItem("header/placeholder")})},bind:function(){var e=this;e.input.on("focus",function(){e.input.val()===e.val&&e.input.val("")}).on("blur",function(){""===e.input.val()&&e.input.val(e.val)})}},DUYA_SUB.subscribe("huyaHeaderDomReady",function(){new t},!0)}),TT.use$(function($){var host=TT.app.main,subscribeURL=TT.isProd?"http://fw.huya.com/":"http://test.fw.huya.com:18081/",follow={init:function(){var e=this,t=HUYA_UTIL.getCookieVal("yyuid");t&&$.ajax({url:subscribeURL+"dispatch?do=subscribeList&uid="+t+"&page=1&pageSize=7",type:"GET",dataType:"jsonp"}).done(function(t){1e3==t.status&&e.tpl(t.result&&t.result.list&&t.result.list.length?t.result.list:[])})},tpl:function(list1){for(var tpl=function(obj){function formatNumber(e){var t=Number(e);return t&&t>1e4&&(e=(t/1e4).toFixed(1)+"\u4e07"),e}var __t,__p="";with(Array.prototype.join,obj||{})__p+="",__p+='\r\n\r\n<li>\r\n\r\n	<a class="video-link new-clickstat" href="'+(null==(__t=link)?"":__t)+'" title="'+(null==(__t=nick)?"":__t)+'" report=\'{"eid":"click/position","position":"click/navi/dy/',__p+=1==isLive?"kb":"wkb",__p+='"}\'>\r\n        <span class="avatar"><img src="'+(null==(__t=avatar180)?"":__t)+'" alt="'+(null==(__t=nick)?"":__t)+'" />',1==isLive&&(__p+="<span>\u5728\u64ad</span>"),__p+='</span>\r\n        <div class="info">\r\n            <p class="name">'+(null==(__t=nick)?"":__t)+'</p>\r\n            <div class="other">\r\n                ',1==isLive&&(__p+='<span class="count"><i></i>'+(null==(__t=formatNumber(totalCount))?"":__t)+"</span>"),__p+='\r\n                <span class="game">'+(null==(__t=gameName)?"":__t)+"</span>\r\n            </div>\r\n        </div>\r\n	</a>\r\n</li>\r\n\r\n";return __p},_tpl="",_navSubDom=$(".nav-subscribe"),_subCount=list1.length,maxLegth=6,onliveNum=0,list1=list1.slice(0,maxLegth),i=0;i<list1.length;i++)_tpl+=tpl({link:host+(list1[i].privateHost||list1[i].yyid),screenshot:list1[i].screenshot,avatar180:list1[i].avatar180,gameName:list1[i].gameName,nick:list1[i].nick,totalCount:list1[i].totalCount,isLive:list1[i].isLive}),1==list1[i].isLive&&onliveNum++;_subCount>0?(_navSubDom.find(".subscribe-hd").show(),_navSubDom.find(".subscribe-bd").show(),_navSubDom.find(".subscribe-list").append(_tpl),_navSubDom.find(".subscribe-key").text(onliveNum),_navSubDom.find(".mod-list-more").hide(),_subCount>maxLegth?_navSubDom.find(".subscribe-all").show():_navSubDom.find(".subscribe-all").hide()):(_navSubDom.find(".subscribe-bd").show(),_navSubDom.find(".more-loading").hide(),_navSubDom.find(".more-empty").show(),_navSubDom.find(".subscribe-all").hide())}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){$("#duya-header .nav-subscribe").one("mouseenter",function(){follow.init()})},!0)}),TT.use$(function(e){var t={init:function(){var t=this,n=TT.app.main+"/cache10min.php?m=Game&do=ajaxNavGame";HUYA_UTIL.isMobile&&(n=TT.app.main+"/cacheapp.php?m=Game&do=ajaxNavGame"),e.ajax({type:"get",url:n,dataType:"jsonp",jsonpCallback:"huyaNavCategory",cache:!0}).done(function(n){var i="";i=n&&1e3==n.status&&n.result?t.tpl(n.result):'<a href="'+TT.app.main+'g" class="nav-expand-game-more" target="_blank">\u66f4\u591a <span>&gt;</span></a>',e(".nav-expand-game").append(i),n&&n.result&&n.result.ad&&TT_RSC_EXPS({pos:"nav/category/ad",rsc:n.result.ad.id})})},tpl:function(e){var t="",n=e.hot,i=e.user,a=e.ad,o=0;if(n&&n.length>0){t+='<dl class="clearfix"><dt>\u70ed\u95e8\u5206\u7c7b</dt>';for(var r=0,s=n.length;s>r;r++)o++,t+='<dd><a class="clickstat" eid="click/navi/game/game'+o+'" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u6e38\u620f/\u6e38\u620f'+o+'" title="'+n[r].name+'" href="'+TT.app.main+"g/"+n[r].host+'" target="_blank">'+n[r].name+"</a></dd>";t+="</dl>"}if(i&&i.length>0){t+='<dl class="clearfix"><dt>\u73a9\u5bb6\u63a8\u8350</dt>';for(var r=0,s=i.length;s>r;r++)o++,t+='<dd><a class="clickstat" eid="click/navi/game/game'+o+'" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u6e38\u620f/\u6e38\u620f'+o+'" title="'+i[r].name+'" href="'+TT.app.main+"g/"+i[r].host+'" target="_blank">'+i[r].name+"</a></dd>";t+="</dl>"}return t+='<a href="'+TT.app.main+'g" class="nav-expand-game-more" target="_blank">\u66f4\u591a <span>&gt;</span></a>',a&&(t+='<a href="'+a.link+'" class="clickstat" eid="click/push/navigame" eid_desc="\u70b9\u51fb/\u63a8\u8350/\u5bfc\u822a\u6e38\u620f\u4e0b\u62c9\u56fe" target="_blank"><img src="'+a.picUrl+'" width="250" height="60" alt="'+a.title+'"/></a>'),t}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){var n=!1,i=null;e(window).on("load",function(){n||(i=setTimeout(function(){t.init(),n=!0},500))}),e("#nav-main").one("mouseover",function(){n||(i&&clearTimeout(i),t.init(),n=!0)})},!0)}),TT.use$(function(e){var t=HUYA_UTIL.getCookieVal,n=!!t("yyuid"),i={init:function(){var i=this,a=e(".load-history");if(n)e.ajax({type:"get",url:"http://fw.huya.com/dispatch",data:{"do":"userHistory",uid:t("yyuid"),guid:t("guid"),token:t("udb_n"),page:1,pageSize:5},dataType:"jsonp",cache:!0}).done(function(e){var t=i.tpl(e&&1e3==e.status?e.result:null);a.html(t)});else{var o="huya_watchHistory";huya_crossStorage.getItem(o,function(e){e&&(e.nowTime=Math.floor(new Date/1e3)),a.html(i.tpl(e))}),huya_crossStorage.change(function(e){(e.key===o||null===e.key)&&huya_crossStorage.getItem(o,function(e){e&&(e.nowTime=Math.floor(new Date/1e3)),a.html(i.tpl(e))})})}},tpl:function(t){var n="";if(t&&t.historyList.length>0){for(var i=t.historyList,a=new Date(1e3*+t.nowTime),o=a.setHours(0,0,0,0),r={today:[],yesterday:[],earlier:[]},s=0;s<i.length;s++)i[s].historyTime=1e3*i[s].historyTime,i[s].historyTime>o?r.today.push(i[s]):o-i[s].historyTime<864e5?r.yesterday.push(i[s]):r.earlier.push(i[s]);var l={today:"\u4eca\u5929",yesterday:"\u6628\u5929",earlier:"\u66f4\u65e9"};for(var c in r){var u=r[c];if(u.length>0){n+='<div class="history-hd"><em></em>'+l[c]+"</div>",n+='<ul class="history-bd">';for(var s=0;s<u.length;s++)n+="<li>",n+=1==u[s].isLive?'<a href="http://www.huya.com/'+u[s].privateHost+'" title="'+u[s].nick+'" class="new-clickstat" report=\'{"eid":"click/position","position":"click/navi/ls/kb"}\'><em class="live"></em><span class="history-nick">'+u[s].nick+'</span><span class="history-type" title="'+u[s].gameName+'">'+u[s].gameName+"</span></a>":'<a href="http://www.huya.com/'+u[s].privateHost+'" title="'+u[s].nick+'" class="new-clickstat" report=\'{"eid":"click/position","position":"click/navi/lishi"}\'><em class="notlive"></em><span class="history-nick">'+u[s].nick+'</span><span class="history-type" title="'+u[s].gameName+'">'+u[s].gameName+"</span></a>",n+="</li>";n+="</ul>"}}i.length>=5&&e(".nav-expand-history-more").css("display","block")}else n='<p class="nav-expand-history-null"><i></i><span>\u6700\u8fd1\u60a8\u6ca1\u6709\u89c2\u770b\u8bb0\u5f55</span></p>';return n}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){e("#nav-history").one("mouseover",function(){i.init()}).on("click",function(e){n||e.preventDefault()})},!0)}),!function(){var html=function(obj){var __p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-login-box" id="J_huyaLoginBox">\r\n    <div class="login-box">\r\n        <div class="login">\r\n            <div class="login-main">\r\n                <div class="login-hd">\r\n                    <a class="tab-btn">\u767b\u5f55</a>\r\n                    <a class="tab-btn">\u6ce8\u518c</a>\r\n                    <i class="line J_line"></i>\r\n                </div>\r\n                <div class="login-bd">\r\n                    <div class="login-content">\r\n                        <div class="tab-unit">\r\n                            <div id="login-tab">\r\n                                <h2 class="login-title">\u5e10\u53f7\u767b\u5f55</h2>\r\n                                <div id="udbsdk_login_content"></div>   \r\n                            </div>\r\n                        </div>\r\n                        <div class="tab-unit">\r\n                            <div class="register-tab">               \r\n                                <iframe frameborder="0" scrolling="no" allowtransparency="true" height="370"></iframe>\r\n                                <!-- <div><a class="reg-by-mail" href="#">\u4f7f\u7528\u90ae\u7bb1\u6ce8\u518c&gt;</a></div> -->\r\n                            </div>\r\n                            <div class="register-tab">\r\n                                <iframe frameborder="0" scrolling="no" allowtransparency="true" height="370"></iframe>\r\n                                <div><a class="reg-by-phone" href="#">\u4f7f\u7528\u624b\u673a\u6ce8\u518c&gt;</a></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <i class="login-loading J_loading"></i>\r\n                </div>\r\n            </div>\r\n            <div class="login-sidebar">\r\n                <h2 class="title">\u5408\u4f5c\u8d26\u53f7\u767b\u5f55</h2>\r\n                <div class="other-login">\r\n                    <a class="login-btn login-btn-wechat clickstat" eid="click/nav/weixinlogin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u5fae\u4fe1\u8d26\u53f7\u767b\u5f55"><i class="icon"></i>\u5fae\u4fe1\u5e10\u53f7\u767b\u5f55</a>\r\n                    <a class="login-btn login-btn-qq clickstat" eid="click/nav/qqlogin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/QQ\u8d26\u53f7\u767b\u5f55" login-type="qq"><i class="icon"></i>QQ\u5e10\u53f7\u767b\u5f55</a>\r\n                    <a class="login-btn login-btn-weibo clickstat" eid="click/nav/weibologin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u65b0\u6d6a\u5fae\u535a\u767b\u5f55" login-type="weibo"><i class="icon"></i>\u5fae\u535a\u5e10\u53f7\u767b\u5f55</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <a class="login-close" id="js-login-close" title="\u5173\u95ed"></a>\r\n        <p class="login-wran-tip">\u4f7f\u7528\u5373\u4e3a\u540c\u610f\u300a<a class="warn-link" href="http://blog.huya.com/product/90" target="_blank" title="\u864e\u7259\u8f6f\u4ef6\u7528\u6237\u534f\u8bae">\u864e\u7259\u8f6f\u4ef6\u7528\u6237\u534f\u8bae</a>\u300b</p>\r\n    </div>\r\n    <div class="account-login-mask"></div>\r\n</div>\r\n';return __p}(),box={init:function(){$("body").append(html),this.view=$("#J_huyaLoginBox"),this.bind()},bind:function(){var e=this;this.view.on("click",".login-btn-qq",function(e){e.preventDefault(),NAV_UTIL.loginOauth("qq")}).on("click",".login-btn-weibo",function(e){e.preventDefault(),NAV_UTIL.loginOauth("weibo")}).on("click",".login-btn-wechat",function(e){e.preventDefault(),NAV_UTIL.loginOauth("weixin")}),this.view.on("click","#js-login-close",function(t){t.preventDefault(),e.close()})},open:function(){this.view.show()},close:function(){this.view.hide()}},tab={init:function(){var e=this,t=$("#J_huyaLoginBox");this.index=-1,this.navItem=t.find(".tab-btn"),this.unit=t.find(".tab-unit"),this.line=t.find(".J_line"),this.navItem.on("click",function(t){t.preventDefault(),e.go($(this).index())})},changeCallbacks:[],go:function(e){if(this.index!==e){this.index=e,this.navItem.removeClass("active").eq(e).addClass("active"),this.unit.hide().eq(e).show(),this.line.css("left",80*e);for(var t=0,n=this.changeCallbacks.length;n>t;t++)this.changeCallbacks[t](e)}},change:function(e){"function"==typeof e&&this.changeCallbacks.push(e)}},regTab={init:function(){var e=this;this.index=-1,this.unit=$(".register-tab"),$(".reg-by-phone").on("click",function(t){t.preventDefault(),e.go(0)}),$(".reg-by-mail").on("click",function(t){t.preventDefault(),e.go(1)})},go:function(e){if(this.index!==e){this.index=e,this.unit.hide().eq(e).show();var t=$("#J_huyaLoginBox").find(".J_loading");this.unit.find("iframe").each(function(n){var i=this;n===e?(t.show(),0===e?NAV_UTIL.registerPhone(function(e){i.src=e.url,t.hide()}):NAV_UTIL.registerMail(function(e){i.src=e.url,t.hide()})):i.src="about:blank"})}}};tab.change(function(e){var t=$("#J_huyaLoginBox").find(".J_loading");0===e?(t.show(),NAV_UTIL.udbLogin(function(){t.hide()})):$("#udbsdk_frm_normal").attr("src","about:blank")}),tab.change(function(e){1===e&&-1===regTab.index&&regTab.go(0)}),window.huya_login_box={init:function(){box.init(),tab.init(),regTab.init()},login:function(){box.open(),tab.go(0)},register:function(e){switch(box.open(),tab.go(1),e){case"EMAIL":regTab.go(1);break;default:regTab.go(0)}},close:function(){box.close()}}}(),TT.use$(function($){$(function(){var isProd=!TT.type,isLogin=!!HUYA_UTIL.getCookieVal("yyuid");if(isLogin){var info=function(){TT.on("getUserInfoComplete",function(e,t){$("#J_huyaNavUserCardAvatarImg").attr("src",t.avatar),$("#J_huyaNavUserCardNick").empty().append("<span></span>").find("span").text(t.nick)},!0)};TT.on("userLvDataChange",function(e,t){!t.noble||2!=t.noble.nobleStatus&&3!=t.noble.nobleStatus||$("#J_huyaNavUserCardAvatar").append('<i class="noble-icon noble-level-'+t.noble.nobleLevel+'""></i>')});var CreateUserExper=function(e){function t(e){a.add(e)}function n(e){e=parseInt(e,10);var t=$.extend({},i);i.userExp+=e,i.userExp>=i.nextLevelExp&&(i.currLevelExp=i.nextLevelExp,i.nextLevelExp=i.next2LevelExp,i.userLevel+=1),i.levelProgress=(i.userExp-i.currLevelExp)/(i.nextLevelExp-i.currLevelExp)*100,a.fire(i,t)}var i={},a=$.Callbacks();for(var o in e)i[o]=parseInt(e[o],10);return{data:i,change:t,add:n}},userExper=null;TT.on("userLvDataChange",function(e,t){function n(e){$("#J_huyaNavUserCardExpFrom").text("LV"+e.userLevel),$("#J_huyaNavUserCardExpTo").text("LV"+(parseInt(e.userLevel,10)+1)),$("#J_huyaNavUserCardExpBar").css("width",e.userExp/e.nextLevelExp*100+"%"),$("#J_huyaNavUserCardExpText").text(e.userExp+"/"+e.nextLevelExp);var t=$("#J_huyaNavUserCardNick");t.find(".level-icon").remove(),t.find(".gender").remove(),t.append('<i class="gender gender'+e.gender+'"></i>'),t.append('<i class="level-icon level-icon'+e.userLevel+'"></i>');var n=200==e.dailyIncExp?"\u4eca\u65e5\u5df2\u83b7\u5f97<em>200</em>\u70b9\u4e0a\u9650":"\u4eca\u65e5\u83b7\u5f97<em>"+e.dailyIncExp+"</em>\u70b9\u7ecf\u9a8c\u503c";$("#J_huyaNavUserCardBarInfo").html(n+"\uff0c\u5347\u7ea7\u8fd8\u9700<em>"+(e.nextLevelExp-e.userExp)+"</em>\u70b9")}t.level&&(userExper=CreateUserExper(t.level),n(userExper.data),userExper.change(n),$("#J_huyaNavUserCardSign").html(""==t.level.sign?'<a href="http://i.huya.com/?m=UserInfo" target="_blank" class="edit_sign">\u70b9\u51fb\u7f16\u8f91\u4e2a\u6027\u7b7e\u540d</a>':'<span title="'+t.level.sign+'">'+t.level.sign+"</span>"))}),TT.on("userLvDataChange",function(e,t){function n(e){if(e=""+e,-1==e.indexOf("."))return e;var t=e.split(".");return t[0]+"."+t[1].charAt(0)}if(t.package){t=t.package;var e=parseInt(t[9],10)||0,i=parseInt(t[32],10)||0,a=parseInt(t[8],10)||0,o=function(e){return 1e4>e?e:1e8>e?n(e/1e4)+"\u4e07":n(e/1e8)+"\u4ebf"};$("#J_huyaNavUserCardAssetsGb").text(o(e)),$("#J_huyaNavUserCardAssetsTk").text(o(i)),$("#J_huyaNavUserCardAssetsSb").text(o(a))}}),window.task={get:function(e){return $.ajax({url:"http://"+(isProd?"":"test.")+"www.huya.com/member/task.php?m=User&do=doGetTaskPrize",data:{taskId:e},dataType:"jsonp"})},container:$("#J_huyaNavUserCardTask")},task.novice={init:function(e,t){this.data=e,this.view=$(this.tpl({tasks:e,reddot:t})),this.bind(),task.container.html(this.view).removeClass("loading")},allDone:function(){var e=task.container.find(".task-btn"),t=0;e.each(function(){$(this).hasClass("done")&&t++}),t==e.length&&(task.container.find(".mod-bd").html('<div class="task-alldone"></div><div class="open-task-days">\u5f00\u542f\u6bcf\u65e5\u4efb\u52a1\uff0c\u52a0\u901f\u63d0\u5347\u7b49\u7ea7 &gt;</div>'),$(".open-task-days").one("click",function(){TT.emit("getListTotal")}))},redhot:function(){var e=$(".nav-user-title").find(".reddot");if(e.length){var t=e.text();t-1>0?e.text(t-1):e.remove()}},tpl:function(obj){var __t,__p="";with(Array.prototype.join,obj||{}){if(__p+='<div class="task-mod task-novice">\r\n    <div class="mod-hd">\r\n        <p class="mod-tit"><i></i>\u65b0\u624b\u4efb\u52a1',reddot.number>0&&(__p+='<span class="task-novice-new">\u53ef\u9886</span>'),__p+='</p>\r\n    </div>\r\n    <div class="mod-bd">\r\n    ',tasks.length){__p+='\r\n        <ul class="tasks">\r\n        ';for(var i=0,l=tasks.length;l>i;i++){var task=tasks[i];__p+='\r\n            <li>\r\n                <span class="task-icon" title="'+(null==(__t=task.desc)?"":__t)+'"><img src="'+(null==(__t=task.icon)?"":__t)+'" alt="icon" /></span>\r\n                <p class="task-name" title="'+(null==(__t=task.desc)?"":__t)+'">'+(null==(__t=task.name)?"":__t)+"</p>\r\n                ",__p+=task.progress>=task.targetLevel?0!=task.awardPrize?'\r\n                        <a class="task-btn done" href="#">\u5b8c\u6210</a>\r\n                    ':'\r\n                        <a class="task-btn get J_get" data-id="'+(null==(__t=task.id)?"":__t)+'" href="#">\u9886\u53d6</a>\r\n                    ':'\r\n                        <a class="task-btn ing" href="#">'+(null==(__t=task.progress)?"":__t)+"/"+(null==(__t=task.targetLevel)?"":__t)+"</a>\r\n                ",__p+="\r\n            </li>\r\n        "}__p+="\r\n        </ul>\r\n    "}else __p+="\r\n        <p>-- \u6682\u65e0\u4efb\u52a1 --</p>\r\n    ";__p+="\r\n    </div>\r\n</div>\r\n"}return __p},bind:function(){var e=this;this.view.on("click",".J_get",function(){var t=$(this),n=t.data("id");n&&!t.hasClass("disable")&&(t.addClass("disable"),task.get(n).always(function(){t.removeClass("disable")}).done(function(i){if(200==i.status)if(!i.data||0!=i.data.code&&910!=i.data.code)alert({913:"\u4efb\u52a1\u5df2\u4e0b\u7ebf",914:"\u4efb\u52a1\u672a\u5b8c\u6210"}[i.data.code]||"\u9886\u53d6\u5931\u8d25\uff01");else{t.removeClass("get J_get");var a=e.find(n);a&&a.exper?(t.addClass("active").text("EXP+"+a.exper),setTimeout(function(){t.removeClass("active").addClass("done").text("\u5b8c\u6210"),e.redhot(),e.allDone()},1750),setTimeout(function(){userExper.add(a.exper)},1e3)):(t.addClass("done").text("\u5b8c\u6210"),userExper.add(a.exper))}else alert(i.msg)}))})},find:function(e){var t=null;return $.each(this.data,function(n,i){return i.id==e?(t=i,!1):void 0}),t}},task.days={init:function(e){var t=$(".nav-user-title").find(".reddot");this.data=e,this.view=$(this.tpl({tasks:e,news:t.length&&""==t.text()?!0:!1})),task.container.html(this.view).removeClass("loading")},tpl:function(obj){var __t,__p="";with(Array.prototype.join,obj||{}){if(__p+='<div class="task-mod task-days">\r\n    <div class="mod-hd">\r\n        <p class="mod-tit"><i></i>\u6bcf\u65e5\u4efb\u52a1',news&&(__p+='<span class="task-days-new">new</span>'),__p+='</p>\r\n    </div>\r\n    <div class="mod-bd">\r\n    ',tasks.length){__p+='\r\n        <ul class="tasks">\r\n            ';for(var i=0,l=tasks.length;l>i;i++){var task=tasks[i];__p+="\r\n                <li ",task.progress>=task.targetLevel&&(__p+='class="done"'),__p+='>\r\n                    <span class="tit">'+(null==(__t=task.desc)?"":__t)+' <em class="process">('+(null==(__t=task.progress)?"":__t)+"/"+(null==(__t=task.targetLevel)?"":__t)+')</em></span> \r\n                    <span class="status"><em class="exp"></em><em class="exp-num">+'+(null==(__t=task.exper)?"":__t)+'</em><em class="state"></em></span>  \r\n                </li>\r\n            '}__p+="\r\n        </ul>\r\n    "}else __p+="\r\n        <p>-- \u6682\u65e0\u4efb\u52a1 --</p>\r\n    ";__p+="\r\n    </div>\r\n</div>\r\n"}return __p}},TT.on("userLvDataChange",function(e,t){if(t.tasks&&t.tasks.length)switch(t.tasks[0].type){case 3:task.novice.init(t.tasks||[],t.reddot);break;case 2:task.days.init(t.tasks||[])}}),TT.on("huyaHeaderDomReady",function(){function e(){r=setTimeout(function(){var e=$(".nav-user-title").find(".reddot");if(""==e.text()){e.remove(),$(".task-days-new").remove();var t=new Date;t.setHours(23,59,59,0),HUYA_UTIL.writeCookie("taskReddot",HUYA_UTIL.getCookieVal("yyuid"),TT.domainForWriteCookie,"/",t)}},200)}function t(){$.ajax({url:"http://"+(isProd?"":"test.")+"www.huya.com/member/task.php?m=User&do=listTotal",dataType:"jsonp",jsonpCallback:"huyaNavUserCard",cache:!0}).done(function(e){200===e.status?(a.set(),e.data&&(TT.emit("userLvDataChange",e.data),TT.emit("huyaHeaderCreateRed",e.data.reddot))):window.console&&window.console.log("\u83b7\u53d6\u6570\u636e\u5931\u8d25: "+e.msg)}).fail(function(e,t){window.console&&window.console.log("\u83b7\u53d6\u6570\u636e\u5931\u8d25: "+t)}).always(function(){o=!1})}var n=!1,i=null,a={get:function(){return n},set:function(){n=!0,clearTimeout(i),i=setTimeout(function(){n=!1},1e4)}},o=!1,r=null;TT.on("getListTotal",function(){t()}),$(".nav-user-title").on("mouseenter",function(){r&&clearTimeout(r),info.executed||(info(),info.executed=!0),a.get()||o||(o=!0,task.container.empty().addClass("loading"),t());try{ya.reportProductEvent({eid:"click/position",position:"header/usercard/hover"})}catch(e){}}).on("mouseleave",function(){e()}),$(".tt-user-card").on("mouseenter",function(){r&&clearTimeout(r)}).on("mouseleave",function(){e()})},!0),TT.on("huyaHeaderCreateRed",function(e,t){var n=$(".nav-user-title").find(".reddot");if(1==t.reddot){if(window.localStorage["userCard/taskReddot"]=HUYA_UTIL.getCookieVal("yyuid"),HUYA_UTIL.hasCookie("taskReddot")&&HUYA_UTIL.getCookieVal("taskReddot")==HUYA_UTIL.getCookieVal("yyuid"))return!1;0==n.length&&$(".nav-user-title").append('<em class="reddot"></em>')}else t.number>0?n.length>0?n.text(t.number).css({width:"15px",height:"15px","line-height":"15px"}):$(".nav-user-title").append('<em class="reddot" style="width: 15px;height: 15px;line-height: 15px;">'+t.number+"</em>"):n.length>0&&n.remove()});var getTaskReddotTimer=null;TT.on("getTaskReddot",function(){getTaskReddotTimer&&clearTimeout(getTaskReddotTimer),getTaskReddotTimer=setTimeout(function(){window.localStorage["userCard/taskReddot"]==HUYA_UTIL.getCookieVal("yyuid")?TT.emit("huyaHeaderCreateRed",{reddot:!0}):$.ajax({url:"http://"+(isProd?"":"test.")+"www.huya.com/member/task.php?m=User&do=getTaskReddot&uid="+HUYA_UTIL.getCookieVal("yyuid"),dataType:"jsonp",jsonpCallback:"getTaskReddot",cache:!0}).done(function(e){if(200===e.status){var t=e.data.reddot;TT.emit("huyaHeaderCreateRed",t)}})},100)}),TT.on("removeTaskReddot",function(){HUYA_UTIL.deleteCookie("taskReddot",TT.domainForWriteCookie,"/"),window.localStorage.removeItem("userCard/taskReddot")
}),TT.on("huyaHeaderDomReady",function(){return HUYA_UTIL.hasCookie("taskReddot")&&HUYA_UTIL.getCookieVal("taskReddot")==HUYA_UTIL.getCookieVal("yyuid")?!1:void TT.emit("getTaskReddot")},!0),TT.on("huyaHeaderDomReady",function(e){function levelInfo(e){for(var t=[{maxVal:5,info:function(e){return"\u8fd8\u5dee"+(6-e)+'\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u4e03\u5f69\u5f39\u5e55<span style="background:#66ff99"></span>'}},{maxVal:9,info:function(e){return"\u8fd8\u5dee"+(10-e)+'\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u4e03\u5f69\u5f39\u5e55<span style="background:#33ffcc"></span>'}},{maxVal:10,info:function(){return"\u8fd8\u5dee1\u7ea7\uff0c\u767e\u5b9d\u7bb1\u5347\u7ea7\u4e3a\u767d\u94f6\u5b9d\u7bb1"}},{maxVal:12,info:function(e){return"\u8fd8\u5dee"+(13-e)+'\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u4e03\u5f69\u5f39\u5e55<span style="background:#ccff66"></span>'}},{maxVal:15,info:function(e){return"\u8fd8\u5dee"+(16-e)+'\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u4e03\u5f69\u5f39\u5e55<span style="background:#33ffff"></span>'}},{maxVal:17,info:function(e){return"\u8fd8\u5dee"+(18-e)+'\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u4e03\u5f69\u5f39\u5e55<span style="background:#33ccff"></span>'}},{maxVal:19,info:function(e){return"\u8fd8\u5dee"+(20-e)+"\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u8896\u73cd\u5f39\u5e55"}},{maxVal:20,info:function(){return"\u8fd8\u5dee1\u7ea7\uff0c\u767e\u5b9d\u7bb1\u5347\u7ea7\u4e3a\u9ec4\u91d1\u5b9d\u7bb1"}},{maxVal:21,info:function(){return'\u8fd8\u5dee1\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u4e03\u5f69\u5f39\u5e55<span style="background:#ff3333"></span>'}},{maxVal:23,info:function(e){return"\u8fd8\u5dee"+(24-e)+'\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u4e03\u5f69\u5f39\u5e55<span style="background:#cc0033"></span>'}},{maxVal:24,info:function(){return"\u8fd8\u5dee1\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u9876\u90e8\u9738\u5c4f\u5f39\u5e55"}},{maxVal:25,info:function(){return'\u8fd8\u5dee1\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u4e03\u5f69\u5f39\u5e55<span style="background:#ff3366"></span>'}},{maxVal:29,info:function(e){return"\u8fd8\u5dee"+(30-e)+"\u7ea7\uff0c\u5c31\u53ef\u4ee5\u6fc0\u6d3b\u5e95\u90e8\u9738\u5c4f\u5f39\u5e55"}},{maxVal:30,info:function(){return""}}],n=0;n<t.length;n++)if(e<=t[n].maxVal)return t[n].info(e)}function firstInfo(e){var t="\u5b8c\u6210\u6bcf\u65e5\u63a8\u8350\u4efb\u52a1\uff0c\u53ef\u4ee5\u83b7\u5f97\u5927\u91cf\u7ecf\u9a8c\u503c";return e&&(t="\u5b8c\u6210\u5e76\u9886\u53d6\u65b0\u624b\u4efb\u52a1\uff0c\u53ef\u4ee5\u83b7\u5f97\u5927\u91cf\u7ecf\u9a8c\u5956\u52b1"),t}function Letter(e){function t(e){a?$(".tt-letter-info").html("<p>\u4eb2\u7231\u7684<em>"+(DUYA_INS.userNick.length>10?DUYA_INS.userNick.slice(0,10):DUYA_INS.userNick)+'</em>\uff0c\u4f60\u5f53\u524d\u7684\u7b49\u7ea7\u4e3aLv.<em id="js-letter_level">'+e.level+"</em> </p><p>"+levelInfo(e.level)+"</p>"):($("body").append(i),a=!0),i.show()}function n(){i.hide()}var i=$(letter_tpl(e)),a=!1;i.on("click",".J_close",function(e){e.preventDefault(),n()}),this.open=t,this.close=n}var letter=null;$("#J_huyaUserLvIntro").on("click",function(e){e.preventDefault();var t=$("#J_huyaNavUserCardExpFrom").text().match(/\d+/),n=$(".task-novice").length>0?!0:!1,i={level:t&&t[0]||0,userNick:DUYA_INS.userNick,firstInfo:firstInfo(n)};letter||(letter=new Letter(i)),letter.open(i)}),TT.on("TTUserLvIntro",function(e,t){letter||(letter=new Letter({level:t.level,userNick:DUYA_INS.userNick,firstInfo:firstInfo(t.bNovice)})),letter.open({level:t.level,userNick:DUYA_INS.userNick,firstInfo:firstInfo(t.bNovice)})});var letter_tpl=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+='<div class="tt-letter">\r\n    <div class="tt-letter-base"></div>\r\n    <div class="tt-letter-paper">\r\n        <div class="tt-letter-cont">\r\n            <div class="tt-letter-info">\r\n                <p>\u4eb2\u7231\u7684<em>'+(null==(__t=userNick.length>10?userNick.slice(0,10):userNick)?"":__t)+'</em>\uff0c\u4f60\u5f53\u524d\u7684\u7b49\u7ea7\u4e3aLv.<em id="js-letter_level">'+(null==(__t=level)?"":__t)+"</em> </p>\r\n                <p>"+(null==(__t=levelInfo(level))?"":__t)+'</p>\r\n            </div>\r\n            <ul class="tt-letter-desc">\r\n                <li>\r\n                    <h3>\u4e03\u5f69\u5f39\u5e55</h3>\r\n                    <p>LV6/10/13/16/18/20/22/24/26\u5206\u522b\u89e3\u9501\u65b0\u7684\u4e03\u5f69\u5f39\u5e55\u989c\u8272</p>\r\n                </li>\r\n                <li>\r\n                    <h3>\u8d85\u7ea7\u767e\u5b9d\u7bb1</h3>\r\n                    <p>Lv11\u53ef\u89e3\u9501\u767d\u94f6\u5b9d\u7bb1\uff0cLV21\u89e3\u9501\u9ec4\u91d1\u5b9d\u7bb1</p>\r\n                </li>\r\n                <li>\r\n                    <h3>\u8896\u73cd\u5f39\u5e55</h3>\r\n                    <p>L20 \u89e3\u9501\u8896\u73cd\u5f39\u5e55</p>\r\n                </li>\r\n                <li>\r\n                    <h3>\u9738\u5c4f\u5f39\u5e55</h3>\r\n                    <p>LV25\u89e3\u9501\u9876\u90e8\u9738\u5c4f\u5f39\u5e55\uff0cLV30\u89e3\u9501\u5e95\u90e8\u9738\u5c4f\u5f39\u5e55</p>\r\n                </li>\r\n            </ul> \r\n            <ul class="tt-letter-more">\r\n                <li>'+(null==(__t=firstInfo)?"":__t)+'</li>\r\n                <li>\u76f4\u64ad\u95f4\u7684\u767e\u5b9d\u7bb1\uff0c\u6bcf\u6253\u5f00\u4e00\u4e2a\u90fd\u53ef\u4ee5\u83b7\u5f97\u7ecf\u9a8c\u503c</li>\r\n                <li>\u9001\u51fa\u4efb\u610f\u793c\u7269\uff0c\u90fd\u53ef\u4ee5\u83b7\u5f97\u76f8\u5e94\u7684\u7ecf\u9a8c\u503c</li>\r\n                <li>\u5728\u76f4\u64ad\u95f4\u5f00\u901a\u8d35\u65cf\uff0c\u5b88\u62a4\u4e3b\u64ad\u7b49\u90fd\u53ef\u4ee5\u83b7\u5f97\u7ecf\u9a8c\u503c</li>\r\n                <li>\u5145\u503c\u8d60\u9001\u7684\u793c\u5305\u91cc\u4e5f\u85cf\u4e86\u8bb8\u591a\u7ecf\u9a8c</li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="tt-letter-envelope"></div>\r\n    <div class="tt-letter-baffle"></div>\r\n    <span class="tt-letter-close J_close">\u5173\u95ed</span>\r\n</div>';return __p};TT.on("getListTotal",function(){$(".tt-letter-more").find("li").eq(0).text(firstInfo())})},!0)}})}),TT.use$(function($){function showDialog(e){function t(e){huya_crossStorage.getItem(e,function(t){t||huya_crossStorage.setItem(e,1)})}function n(){setTimeout(function(){c.remove()}),a&&clearInterval(a),huya_crossStorage.removeItem(key+l)}var i=60,a=null,o=e.data,r=e.afterRender||$.noop,s="object"==typeof o?o:$.parseJSON(o),l=s.eventId,c=$(liveNoticeTmpl({data:s}));c.appendTo("body").animate({bottom:5}).on("click",".notice-close,.notice-btn",function(){n()}),r(c),a=setInterval(function(){if(i--,i>=1){var e=" "+i;c.find(".js-notice-time").text(e)}else n()},1e3),t(key+l)}var liveNoticeTmpl=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-head-notice">\r\n    <div class="notice-hd">\r\n        <i class="notice-icon"></i>\r\n        <span class="notice-title">\u76f4\u64ad\u901a\u77e5</span>\r\n        <span class="notice-tip"><span class="js-notice-time">10</span>s\u540e\u81ea\u52a8\u5173\u95ed</span>\r\n        <a class="notice-close" title="\u5173\u95ed\u5f39\u7a97"></a>\r\n    </div>\r\n    <div class="notice-bd">\r\n        ',data.image&&(__p+='\r\n            <a class="notice-pic" href="'+(null==(__t=data.action)?"":__t)+'" target="_blank">\r\n                ',data.gameFullName&&(__p+='<div class="notice-gameFullName">'+(null==(__t=data.gameFullName)?"":__t)+"</div>"),__p+='\r\n                <img src="'+(null==(__t=data.image)?"":__t)+'"> \r\n            </a>\r\n        '),__p+='\r\n        <div class="notice-text">\r\n            <h2 class="anchor-name">'+(null==(__t=data.title)?"":__t)+"</h2>\r\n            ",data.nick&&(__p+='<h3 class="anchor-nick" title="'+(null==(__t=data.nick)?"":__t)+'">'+(null==(__t=data.nick)?"":__t)+"</h3>"),__p+='\r\n            <p class="notice-content" title="'+(null==(__t=data.content)?"":__t)+'">\r\n                '+(null==(__t=data.content)?"":__t)+'\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <a class="notice-btn" href="'+(null==(__t=data.action)?"":__t)+'" target="_blank">\u9a6c\u4e0a\u89c2\u770b</a>\r\n</div>';return __p},key="huya_liveNotice";huya_crossStorage.change(function(e){new RegExp(key).test(e.key)&&null==e.newValue&&$("#"+e.key).remove()}),window.HUYA_HEAD_liveNotice=function(e){showDialog({data:e,afterRender:function(){DUYA_SUB.publish("INDEX_LIVE_NOTICE",e.eventId)}})},window.HUYA_SUBSCRIBE_PUSH=function(e){if(!$.isEmptyObject(e))for(var t in e){var n=e[t],i={title:"\u4f60\u8ba2\u9605\u7684\u4e3b\u64ad: ",content:(n.introduction?'\u5728\u64ad"'+n.introduction+'"':"\u6b63\u5728\u5f00\u64ad\u5566,")+"\u5feb\u62a2\u4e2a\u677f\u51f3\u5750\u597d",image:n.avatar180,action:TT.app.main+n.privateHost,eventId:n.aid,nick:n.nick,gameFullName:n.gameFullName};showDialog({data:i,afterRender:function(e){e.addClass("subscribe-notice"),e.find(".notice-close").addClass("clickstat").attr({eid:"click/dytc/close",eid_desc:"\u70b9\u51fb/\u8ba2\u9605\u5f39\u7a97/\u5173\u95ed"}),e.find(".notice-btn").addClass("clickstat").attr({eid:"click/dytc/in",eid_desc:"\u70b9\u51fb/\u8ba2\u9605\u5f39\u7a97/\u8fdb\u5165\u76f4\u64ad\u95f4"})}})}},window.HUYA_NOTICE_PUSH=function(e){showDialog({data:e,afterRender:function(e){e.addClass("normal-notice")}})}}),TT.use$(function(e){var t=window.HUYA_UTIL,n=TT.isProd?"http://fw.huya.com/":"http://test.fw.huya.com/",i={isHuyaLiveRoom:/^\/([A-Za-z0-9]{2,})(|\/)$/.test(location.pathname),isHuyaIndex:location.href==TT.app.main},a={userSubscribeList:[],cacheObj:{},isShowRefreshTips:!1,getSubSt:null,getAllLiveSt:null,tips_left:0,refreshPush:function(e){window.HUYA_SUBSCRIBE_PUSH&&window.HUYA_SUBSCRIBE_PUSH(e)},getUserSubscribe:function(){var t=this;e.ajax({url:n+"dispatch?do=userSubscribeAid&uid="+DUYA_INS.userId,type:"GET",dataType:"jsonp",success:function(e){if(1e3==e.status&&(t.userSubscribeList=e.result.list||[],window.localStorage)){var n=JSON.stringify(t.userSubscribeList);localStorage.setItem("huya_header_subscribe",n)}}})},getNewestLive:function(){var t=this;e.ajax({url:n+"dispatch?do=newestLive&time=120",type:"GET",dataType:"jsonp",success:function(e){if(1e3==e.status){var n=t.mapSubscribeList(e.result,t.userSubscribeList);t.refreshPush(n)}}})},mapSubscribeList:function(t,n){var i=this,a={};for(var o in t)for(var r=0,s=n.length;s>r;r++)o.toString()==n[r].toString()&&(a[o]=t[o]);if(!e.isEmptyObject(i.cacheObj))for(var l in a)"undefined"!=typeof i.cacheObj[l]&&delete a[l];return i.cacheObj=a,a},init:function(n){var i=this,a=e(".duya-header-tips");if(a.on("click",".refresh-current",function(){e(this).parent("p").remove(),0==e(".refresh-tips p").length&&a.removeClass("appear-tips")}).on("change","#checkTips",function(){if(e(this).attr("checked")){var n=new Date;n.setTime(n.getTime()+864e5),t.writeCookie("stopPushSub","1",TT.domainForWriteCookie,"/",n),e("#refresh-wrap").remove(),i.isShowRefreshTips||(a.removeClass("appear-tips"),i.isShowRefreshTips=!0)}}).on("click",".close-tips",function(){a.removeClass("appear-tips")}),"1"==t.hasCookie("stopPushSub")&&a.find("#refresh-wrap").remove(),"1"!=t.hasCookie("stopPushSub")&&DUYA_INS.islogin&&!location.host.match("admin.huya.com")&&(i.getSubSt=setTimeout(function(){i.getUserSubscribe(),clearTimeout(i.getSubSt),i.getSubSt=setInterval(function(){i.getUserSubscribe()},6e5)},59e3),n||(i.getAllLiveSt=setInterval(function(){i.getNewestLive()},61e3))),e(window).on("scroll",function(){e(".duya-header-tips").length>0&&e(".duya-header-tips").hasClass("appear-tips")&&(e(window).scrollTop()>e("#duya-header").height()?a.css({position:"fixed",top:"45px",left:i.tips_left}):a.attr("style",""))}),window.localStorage){var o=localStorage.getItem("huya_header_subscribe");this.userSubscribeList=JSON.parse(o)||[]}this.initRefreshTips()},initRefreshTips:function(){var t=this,n=e(".duya-header-tips");n.on("click",".tips-top .refresh-current",function(){location.reload()}).on("click",".close-tips",function(){n.removeClass("appear-tips")}),i.isHuyaLiveRoom||i.isHuyaIndex||setTimeout(function(){n.addClass("appear-tips").find(".tips-top").show(),t.tips_left=n.offset().left,t.isShowRefreshTips=!0},18e5)}};window.DUYA_PUSH=a}),!function(){var e=function(){var e=$.Deferred(),t=0,n=function(){++t>=2&&e.resolve()},i=!1,a=setTimeout(function(){i=!0,n()},3500);return $(window).on("load",function(){i||(clearTimeout(a),n())}),TT.on("reportReady",function(){n()},!0),function(t){e.done(t)}}(),t=function(t){var n=[];$.each(t,function(e,t){if(t){var i="pos="+t.pos+",resid="+(t.rsc||0)+(t.ren?",uid="+t.ren:"");n.push("{"+i+"}")}}),e(function(){try{ya.reportProductEvent({eid:"pageview/position",extra_ext:"["+n.join(",")+"]"})}catch(e){}})},n=function(){var e=[],n=null;return function(i){i&&(clearTimeout(n),e.push(i),e.length>=10?(t(e),e=[]):n=setTimeout(function(){t(e),e=[]},2e3))}}();e(function(){$(".J_g_resource").each(function(){n($(this).data())}),$("body").on("click",".J_g_resource",function(){var e=$(this).data();if(e)try{ya.reportProductEvent({eid:"click/position",position:e.pos,resourceid:e.rsc,ayyuid:e.ren})}catch(t){}})}),window.TT_RSC_EXPS=n}(),function(){var e=window.HUYA_UTIL;window.NAV_INDEX=window.NAV_INDEX||"http://"+window.location.host+"/",window.NAV_UTIL={login:function(){huya_login_box.login()},udbLogin:function(e){t.prototype.getUDB(function(){$.post(NAV_INDEX+"udb_web/authorizeURL.php?do=authorizeEmbedURL",{callbackURL:NAV_INDEX+"udb_web/udbport2.php?do=callback"},function(t){UDB.sdk.PCWeb.embedOpenLgn(t,NAV_INDEX+"udb_web/udbport2.php?do=callback"),"function"==typeof e&&e()},"json")})},UDBLoginCallback:function(){huya_login_box.close()},logout:function(){t.prototype.getUDB(function(){$.get(NAV_INDEX+"udb_web/udbport2.php?do=logout",{},function(e,t){"success"==t&&UDB.sdk.PCWeb.deleteCrossmainCookieWithCallBack(e,function(){window.location.reload()})})})},offlineNotice:function(){t.prototype.getUDB(function(){$.get(NAV_INDEX+"udb_web/udbport2.php?do=logout",{},function(e,t){"success"==t&&UDB.sdk.PCWeb.deleteCrossmainCookieWithCallBack(e,function(){})})});var e=$("body"),n='<div id="offline-notice"><div class="login-closure-tit">\u6e29\u99a8\u63d0\u793a<span id="offline-notice-close"></span></div><div class="login-closure-cnt"><h2 style="text-align: center;font-size: 18px;font-weight: 800;margin-bottom: 5px;">\u4e0b\u7ebf\u901a\u77e5</h2><p style="text-align: center;">\u60a8\u7684\u8d26\u53f7'+HUYA_UTIL.getCookieVal("username")+'\uff0c\u4fee\u6539\u4e86\u767b\u5f55\u5bc6\u7801\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55</p></div><span id="offline-notice-sure">\u91cd\u65b0\u767b\u5f55</span></div><div id="offline-notice-mask"></div>';e.append(n),$("#offline-notice-sure,#offline-notice-close").one("click",function(){$("#offline-notice-mask").remove(),$("#offline-notice").remove()}),$("#offline-notice-sure").one("click",function(){NAV_UTIL.login()})},getStatus:function(n){var i=t.prototype;"undefined"!=typeof i.islogin?e.isFunction(n)&&n():i.getUDB(function(){$.getJSON(NAV_INDEX+"udb_web/checkLogin.php",function(t){1==t.isChanged&&NAV_UTIL.offlineNotice(),i.islogin=t.isLogined,i.userName=t.userName,i.userNick=t.userNick,i.userLogo=t.userLogo,i.userId=t.uid,window.a_userIsLogin=i.islogin,window.a_userName=i.userName,e.isFunction(n)&&n()})})},getUserName:function(){return $.getJSON(NAV_INDEX+"udb_web/udbport2.php?do=checkUserNick")},getUserAvatar:function(){var t=!0;return $.ajax({url:"http://"+(t?"":"test.")+"user.huya.com/user/getUserInfo",data:{uid:e.getCookieVal("yyuid")},dataType:"jsonp",cache:!0})},setLoginInfo:function(){var e=t.prototype,n=this;e.getUDB(function(){n.getStatus(function(){if(""!=e.userName||e.islogin){$("#duya-header .success-login").show();var t=e.userNick?$.Deferred().resolve([{}]):n.getUserName();$.when(n.getUserAvatar(),t).done(function(t,n){var i=t[0],a=n[0];if(a&&i&&200==i.code)e.userNick=a.userNick||e.userNick,e.userLogo=i.data&&i.data.avatar||a.userLogo||e.userLogo||"http://a.dwstatic.com/huya/main/img/10001.jpg";else{e.userNick||(e.userNick=e.userName),e.userLogo||(e.userLogo="http://a.dwstatic.com/huya/main/img/10001.jpg");try{console.log("\u516c\u5171\u5934\u83b7\u53d6\u7528\u6237\u6570\u636e\u5f02\u5e38")}catch(o){}}}).fail(function(){e.userNick||(e.userNick=e.userName),e.userLogo||(e.userLogo="http://a.dwstatic.com/huya/main/img/10001.jpg");try{console.log("\u516c\u5171\u5934\u83b7\u53d6\u7528\u6237\u6570\u636e\u5931\u8d25")}catch(t){}}).always(function(){$("#login-username").attr("title",e.userNick).text(e.userNick),$("#login-userAvatar").attr("src",e.userLogo),DUYA_SUB.publish("getUserInfoComplete",{name:e.userName,nick:e.userNick,avatar:e.userLogo})}),DUYA_PUSH.init(!0)}else $("#duya-header .un-login").show()})})},isLogin:function(){return e.hasCookie("username")},getUserInfo:function(){return e.hasCookie("username")?{uName:e.getCookieVal("username"),yyID:e.getCookieVal("yyuid")}:null},checkLogin:function(n){var i=t.prototype,a=this;i.getUDB(function(){a.getStatus(function(){i.islogin?e.isFunction(n)&&n(i.userId,i.userName):a.login()})})},check:function(n){var i=t.prototype,a=this;i.getUDB(function(){a.getStatus(function(){var t={};e.isFunction(n)&&(t.isLogined=i.islogin,t.userName=i.userName,n(t))})})},loginFail:function(e){if(this.minWindow&&this.minWindow.close(),e&&"MUTE"===e.code){var t=$("body"),n='<div id="login-closure"><div class="login-closure-tit">'+e.data.title+'<span id="login-closure-close"></span></div><div class="login-closure-cnt">'+e.data.msg+'</div><span id="login-closure-sure">\u786e\u5b9a</span></div><div id="login-closure-mask"></div>';t.append(n),$("#login-closure-sure,#login-closure-close").one("click",function(){$("#login-closure-mask").remove(),$("#login-closure").remove()})}},reloadPage:function(){null!=this.minWindow&&this.minWindow.close(),window.location.reload()},loginOauth:function(e){var t=NAV_INDEX+"udb_web/udbport2.php?do=dummy3AuthorizeURL&loginType="+e;this.minWindow=window.open(t,"_blank"),this.minWindow.focus()},registerPhone:function(e,t){$.ajax({url:NAV_INDEX+"udb_web/udbport2.php?do=registerEmbedURL&registerUrl=https://zc.yy.com/reg/udb/reg4udb.do&type=Mobile",type:"post",dataType:"json"}).done(function(n){"1"==n.success?e&&e(n):t&&t(n)})},registerMail:function(e,t){$.ajax({url:NAV_INDEX+"/udb_web/udbport2.php?do=registerEmbedURL&registerUrl=https://zc.yy.com/reg/udb/reg4udb.do&type=Email",type:"post",dataType:"json"}).done(function(n){"1"==n.success?e&&e(n):t&&t(n)})},minWindow:null};var t=function(){this.init()};t.prototype.getUDB=function(t){"undefined"!=typeof UDB?e.isFunction(t)&&t():e.getScript("http://res.udb.duowan.com/lgn/js/oauth/udbsdk/pcweb/udb.sdk.pcweb.embed.min.js?_=2333",function(){try{window.UDB.sdk.PCWeb.initialize()}catch(n){}e.isFunction(t)&&t()})},t.prototype.headEven=function(){var t=($(".login-box").find(".login-loading"),$("#duya-header"));$(".J_gNavLogin").on("click",function(t){e.getCookieVal("yyuid")||(t.preventDefault(),NAV_UTIL.login())}),t.find("#nav-login").click(function(e){e.preventDefault(),huya_login_box.login()}),t.find("#nav-regiest").click(function(e){e.preventDefault(),huya_login_box.register()}),t.find("#nav-loggout").click(function(e){e.preventDefault(),NAV_UTIL.logout()})},t.prototype.initUDB=function(){var e=this;e.getUDB(function(){NAV_UTIL.setLoginInfo(),e.headEven()}),huya_login_box.init()},t.prototype.myMessageShow=function(){var e=$("#J_huyaNavUserMsgDot");e.show(),$("#J_huyaNavUserMsg").off("click").on("click",function(){e.hide()})},t.prototype.myMessageHide=function(){$("#J_huyaNavUserMsgDot").hide()},t.prototype.init=function(){var t=this;DUYA_SUB.publish("huyaHeaderDomReady"),window.jQuery?t.initUDB():e.getScript("http://assets.dwstatic.com/b=common/js&f=jquery-1.11.1.min.js,jquery-migrate-1.2.1.min.js&20141230",function(){t.initUDB()})},window.DUYA_INS=new t}(),!function(){function centerOnScreen(e){var t=($(window).width()-e.width())/2,n=($(window).height()-e.height())/2;return e.css({left:t+"px",top:n+"px"}),e}function showBrowserTip(){if($.browser.msie&&7>=$.browser.version&&"1"!=HUYA_UTIL.hasCookie("browserUpDate")){var expiretime=new Date;if(expiretime.setTime(expiretime.getTime()+864e5),HUYA_UTIL.writeCookie("browserUpDate","1",TT.domainForWriteCookie,"/",expiretime),0==$(".browser-box").length){var sHtml=function(obj){var __p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-header-box browser-box">\r\n    <div class="hd">\r\n        <div class="tip">\u6e29\u99a8\u63d0\u793a</div>\r\n        <i class="close"></i>\r\n    </div>\r\n    <div class="bd">\r\n        <div class="browser">   \r\n            <div class="title-pic"></div>\r\n            <div class="desc">\r\n                \u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e\uff0c\u5bfc\u81f4\u7f51\u7ad9\u90e8\u5206\u529f\u80fd\u65e0\u6cd5\u6b63\u5e38\u663e\u793a\uff0c\u5efa\u8bae\u5347\u7ea7\u4e3a\uff1a\r\n            </div>\r\n            <ul class="browser-list clearfix">\r\n                <li class="browser-item browser-sougou">\r\n                    <div class="pic">\r\n                        <a class="link" href="http://ie.sogou.com/" target="_blank" ></a>\r\n                        <p class="name">\u641c\u72d7\u6d4f\u89c8\u5668\u6700\u65b0\u7248</p>\r\n                    </div>\r\n                    <a class="download" href="http://ie.sogou.com/" target="_blank">\u4e0b\u8f7d</a>\r\n                </li>\r\n                <li class="browser-item browser-chrome">\r\n                    <div class="pic">\r\n                        <a class="link" href="http://www.google.cn/chrome/browser/desktop/index.html" target="_blank"></a>\r\n                        <p class="name">Chrome\u6d4f\u89c8\u5668\u6700\u65b0\u7248</p>\r\n                    </div>\r\n                    <a class="download" href="http://www.google.cn/chrome/browser/desktop/index.html" target="_blank">\u4e0b\u8f7d</a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';return __p},$elem=$(sHtml());$("body").append($elem),centerOnScreen($elem).show(),$(window).on("resize",function(){$elem.is(":visible")&&centerOnScreen($elem)}),$(document).on("click",".browser-box .close",function(){$(".browser-box").hide()})}else $(".browser-box").show()}}showBrowserTip()}();