dwfis.define("tools",function(e,n){{var t=n.once=function(e){var n,t;return function(){return t||(t=!0,n=e.apply(this,arguments)),n}},o=(n.getSingle=function(e){var n;return function(){return n||(n=e.apply(this,arguments))}},n.getScript=function(e,n){function t(){u.onload=u.onreadystatechange=null,u=null,"function"==typeof n&&n()}var o=document,a=o.head||o.getElementsByTagName("head")[0]||o.documentElement,u=o.createElement("script");"onload"in u?u.onload=t:u.onreadystatechange=function(){/loaded|complete/.test(u.readyState)&&t()},u.charset="utf-8",u.type="text/javascript",u.async=!0,u.src=e,a.appendChild(u)});n.getSingleScript=function(e){var n=t(function(){var n=$.Deferred();return o(e,function(){n.resolve()}),function(e){n.done(e)}});return function(e){n()(e)}},n.debounce=function(e,n,t){var o=null,a=function(){o&&clearTimeout(o);var a=this,u=arguments;return t?(o||e.apply(a,u),o=setTimeout(function(){o=null},n)):o=setTimeout(function(){o=null,e.apply(a,u)},n),a};return a.cancel=function(){clearTimeout(o),o=null},a},n.throttle=function(e,n){function t(){u=arguments,r=this,a||(a=setTimeout(function(){a=null,e.apply(r,u),r=u=null},o?0:n),o&&(o=!1))}var o=!0,a=null,u=null,r=null;return t.cancel=function(){clearTimeout(a),a=r=u=null},t},n.loadImg=function(e,n,t,o){return e?(n=n||function(){},t=t||function(){},o=o||new Image,o.readyState?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&(o.onreadystatechange=null,n(o))}:o.onload=function(){n(o)},o.onerror=function(){t(o)},o.src=e,o):void 0},n.DJBHash=function(e){if(e){var n,e=e+"",t=5381;if(e){for(var o=0,a=e.length;a>o;++o)t+=(t<<5)+e.charAt(o).charCodeAt();n=2147483647&t}return n}},n.importStyle=function(e,n){if(!document.getElementById(n)){var t=document.createElement("style");if(n&&(t.id=n),document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet){if(document.getElementsByTagName("style").length>31)throw new Error("Exceed the maximal count of style tags in IE");t.styleSheet.cssText+=e}else t.appendChild(document.createTextNode(e));return t}}}});
;dwfis.define("Event",function(){function a(){function a(a,n,r){if(!e(a)||!i(n))return this;var l=f[a]||(f[a]={fired:!1,data:null,callbacks:new t});return l.callbacks.add(n),r&&l.fired&&l.callbacks.fireWith(this,l.data),this}function n(a){if(!e(a))return this;var n=f[a]||(f[a]={fired:!1,data:null,callbacks:new t});n.fired=!0,n.data=r.call(arguments,1),"ALL"!==a&&n.callbacks.fireWith(this,n.data);var i=f.ALL||(f.ALL={fired:!1,data:null,callbacks:new t});return i.fired=!0,i.data=r.call(arguments,0),i.callbacks.fireWith(this,i.data),this}function l(a,t){var n=arguments.length;if(0===n)for(var r in f)f.hasOwnProperty(r)&&f[r].callbacks.empty();else if(e(a)){var l=f[a];l&&(1===n?l.callbacks.empty():i(t)&&l.callbacks.remove(t))}return this}function c(t,n,r){if(!e(t)||!i(n))return this;var c=function(){n.apply(this,arguments),l(t,c)};a(t,c,r)}var f={};return{on:a,one:c,off:l,emit:n}}var t=$.Callbacks,n=[],r=n.slice,i=function(a){return"function"==typeof a},e=function(a){return"string"==typeof a};return a});
;dwfis.define("h5playeOnloadReport",function(n){function t(n){var t=o.loadImg("http://ylog.hiido.com/c.gif?"+$.param(n));setTimeout(function(){t=null},100)}function e(n){var o=$.extend({state:"on",type:0},n,{act:"webh5playeronload",time:parseInt(1*new Date/1e3)});t(o),e=null}var o=n("tools");return function(n){e&&e(n)}});
;dwfis.define("liveRoomPvReport",function(t){function e(t){var e=o.loadImg("http://ylog.hiido.com/c.gif?"+$.param(t));setTimeout(function(){e=null},100)}function n(t){var o=$.extend({state:"on",type:0,player:0},t,{act:"webhuyaliveroompv",time:parseInt(1*new Date/1e3)});e(o),n=null}var o=t("tools");return function(t){n&&n(t)}});
;dwfis.define("liveRoomDurationReport",function(e){function t(e){var t=a.loadImg("http://ylog.hiido.com/c.gif?"+$.param(e));setTimeout(function(){t=null},100)}function n(e){var n=$.extend({duration:0,type:0},e,{act:"webhuyaliveroomduration",time:parseInt(1*new Date/1e3),player:i.isH5?0:1,state:i.ready()?1:0,user:r?1:0});t(n)}function o(e,t,o){var i=0,a=setInterval(function(){i++,e.duration=o/1e3*i,n(e),i>=t&&clearInterval(a)},o)}var i=e("TTP"),a=e("tools"),r=HUYA_UTIL.getCookieVal("yyuid");return function(e){o(e,2,5e3),o(e,3,2e4),o(e,2,3e5),o(e,3,12e5)}});
;dwfis.define("dialog",function(){function t(s){if(!(this instanceof t))return new t(s);$.isPlainObject(s)||(s={view:s}),$.extend(this,{view:"<div></div>",width:"",height:"",zIndex:999,lock:!0,container:document.body},$.layerSettings,s),this.lock&&(this.overlay=i(s)),this.view=$(this.view).eq(0),this.container=$(this.container).eq(0);var e=this.container[0];e&&e!==window&&e!==document||(this.container=$(document.body)),this.render()}function i(i){i=i||{};var s,e,n=$("<div></div>").css({opacity:i.opacity||.5,backgroundColor:i.color||"#000",zoom:1}),o=$(i.container);return o[0]&&o[0]!==window&&o[0]!==document&&o[0]!==document.body?(s=o.innerWidth(),e=o.innerHeight()):s=e="100%",t({view:n,width:s,height:e,zIndex:i.zIndex,container:i.container,lock:!1})}function s(t){return new s.prototype.init(t)}var e=$.browser.msie?parseInt($.browser.version,10):!1;return t.prototype={render:function(){this.view.css("position","absolute"),this.view.css("zIndex",this.zIndex),this.view.width(this.width),this.view.height(this.height),this.view.appendTo(this.container),this.open(),this.center()},center:function(){function t(){i.css({position:"absolute",left:n.scrollLeft()+(n.width()-i.outerWidth())/2,top:n.scrollTop()+(n.height()-i.outerHeight())/2})}function t(){i.css({position:"fixed",left:(n.width()-i.outerWidth())/2,top:(n.height()-i.outerHeight())/2})}var i=this.view,s=this.container;if(s[0]===document.body){var n=$(window);6==e?("static"===s.css("position").toLowerCase()&&s.css("position","relative"),t(),n.resize(t).scroll(t)):(t(),n.resize(t))}else"static"===s.css("position").toLowerCase()&&s.css("position","relative"),i.css({position:"absolute",left:(s.innerWidth()-i.outerWidth())/2,top:(s.innerHeight()-i.outerHeight())/2})},open:function(){this.view.show(),this.lock&&this.overlay.open()},hide:function(){this.view.hide(),this.lock&&this.overlay.hide()},close:function(){this.view.remove(),this.lock&&this.overlay.close()}},s.loading=function(t,i){return s({title:t,customClass:"loadingDlg",content:'<div class="loadingDlg-cont"><i></i></div>',buttons:[],zIndex:i})},s.alert=function(t,i,e,n){return s({title:t,customClass:"alertDlg",content:'<div class="alertDlg-cont"><div class="alertDlg-txt">'+i+"</div></div>",buttons:e,zIndex:n})},s.suc=function(t,i,e,n){return s({title:t,customClass:"alertDlg",content:'<div class="alertDlg-cont"><i class="icon-suc"></i><p class="alertDlg-msg">'+i+"</p></div>",buttons:e,zIndex:n})},s.err=function(t,i,e,n){return s({title:t,customClass:"alertDlg",content:'<div class="alertDlg-cont"><i class="icon-err"></i><p class="alertDlg-msg">'+i+"</p></div>",buttons:e,zIndex:n})},s.tip=function(t,i,e,n){return s({title:t,customClass:"alertDlg",content:'<div class="alertDlg-cont"><i class="icon-tip"></i><p class="alertDlg-msg">'+i+"</p></div>",buttons:e,zIndex:n})},s.prototype={init:function(i){$.extend(this,{title:"title",content:"",customClass:"",init:function(){},close:function(){},buttons:[{type:0,name:"\u786e\u5b9a",click:function(){},close:!0}]},i);for(var s=0,e=this.buttons.length;e>s;s++)this.buttons[s]=$.extend({name:"button",click:function(){},close:!0},this.buttons[s]);this.closeCallback=this.close,delete this.close,this.state=1,this.create(),this.layer=t({view:this.view,width:this.width,height:this.height,zIndex:this.zIndex,lock:this.lock,container:this.container}),this.lock&&(this.overlay=this.layer.overlay),$.isFunction(this.init)&&this.init()},create:function(){for(var t=this,i="",s=[],e=null,n=null,o=0,l=this.buttons.length;l>o;o++)e=this.buttons[o],function(i){n=$('<a class="dlg-btn" href="#"></a>').text(i.name).addClass(["","dlg-btn-orange","dlg-btn-gray"][i.type]).click(function(s){s.preventDefault(),$.isFunction(i.click)&&i.click.apply(t,arguments),i.close&&t.close()})}(e),s.push(n[0]);this.buttons=$(s),i=['<div class="dlg">','<div class="dlg-hd">','<h5 class="dlg-tit"></h5>',"</div>",'<div class="dlg-bd"></div>','<div class="dlg-ft"></div>','<a class="dlg-close" title="\u5173\u95ed" href="#">','<i class="dlg-close-t"></i>','<i class="dlg-close-r"></i>','<i class="dlg-close-b"></i>','<i class="dlg-close-l"></i>',"</a>","</div>"].join(""),this.view=$(i).addClass(this.customClass),this.content=$(this.content),""!==this.title?this.view.find(".dlg-tit").html(this.title):this.view.addClass("acephalousDlg"),this.view.find(".dlg-bd").append(this.content),this.buttons.length?this.view.find(".dlg-ft").append(this.buttons):this.view.find(".dlg-ft").remove(),this.view.find(".dlg-close").click(function(i){i.preventDefault(),t.close()})},open:function(){this.state<=1||(this.layer.open(),this.state=1)},hide:function(){0!==this.state&&2!==this.state&&(this.layer.hide(),this.state=2)},close:function(){0!==this.state&&(this.layer.close(),this.state=0,$.isFunction(this.closeCallback)&&this.closeCallback())}},s.prototype.init.prototype=s.prototype,{layer:t,dialog:s}});
;dwfis.define("getCreatelayer",function(e){var n=e("tools"),o=n.once(function(){var e=$.Deferred();return n.getScript("http://hd.huya.com/live_room_layer/createLayer-min.js",function(){e.resolve(window.Createlayer)}),function(n){e.done(n)}});return $(window).on("load",o),setTimeout(o,1e4),function(e){o()(e)}});
;dwfis.define("widget/icon-anchor-lv",function(i,n,c){function o(i){return $.isNumeric(i)?'<i class="icon-anchor-lv icon-anchor-lv'+i+'"></i>':""}c.exports={create:o}});
;dwfis.define("widget/fansBadgeAnchor",function(require,exports,module){function getAnchorActInfo(t,n){n="function"==typeof n?n:function(){},TTP.isH5?TTP.ready(function(e){e.addTafListener("getPresenterActivity",function(t){n(t),e.removeTafListener("getPresenterActivity")});var r=new HUYA.PresenterActivityReq;r.tId=e.userId,r.lUid=t,e.sendWup("huyauserui","getPresenterActivity",r)}):(TTP.one("PresenterActivityRsp",function(t){n(t.param)}),TTP.ready(function(n){n.callAs("PresenterActivityReq",{lBadgeId:t})}))}function Anchor(t){var n=$(tpl(t));return{view:n,close:function(){n.remove()}}}var iconAnchorLv=require("widget/icon-anchor-lv"),tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadgeAnchor">\r\n    <div class="fansBadgeAnchor-hd">\u5fbd\u7ae0\u4e3b\u64ad</div>\r\n    <div class="fansBadgeAnchor-bd">\r\n        <a class="fansBadgeAnchor-avatar" target="_blank" href="'+(null==(__t=TT.app.main+(tAct.tLive.sPrivateHost||tAct.tLive.lYYId))?"":__t)+'">\r\n            <img src="'+(null==(__t=tAct.sAvatar)?"":__t)+'" alt="\u4e3b\u64ad\u5934\u50cf" />\r\n            ',tAct.bLive&&(__p+="\r\n            <i>\u5728\u64ad</i>\r\n            "),__p+='\r\n        </a>\r\n        <div class="fansBadgeAnchor-cont">\r\n            <div class="fansBadgeAnchor-nick">\r\n                <a target="_blank" href="'+(null==(__t=TT.app.main+(tAct.tLive.sPrivateHost||tAct.tLive.lYYId))?"":__t)+'" class="fansBadgeAnchor-name" title="'+(null==(__t=tAct.sNick)?"":_.escape(__t))+'">'+(null==(__t=tAct.sNick)?"":_.escape(__t))+"</a>\r\n                "+(null==(__t=iconAnchorLv.create(tAct.iLevel))?"":__t)+'\r\n            </div>\r\n            <div class="fansBadgeAnchor-tag">\r\n                ',tAct.tLive.sGameName&&(__p+="\r\n                <span>"+(null==(__t=tAct.tLive.sGameName)?"":__t)+"</span>\r\n                "),__p+="\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>";return __p},cache={};return function(t){var n=t.uid;n&&(t.init="function"==typeof t.init?t.init:function(){},t.maxAge="number"==typeof t.maxAge?t.maxAge:12e4,cache[n]?t.init(Anchor(cache[n])):getAnchorActInfo(n,function(e){t.maxAge&&(cache[n]=e,setTimeout(function(){cache[n]=null},t.maxAge)),t.init(Anchor(e))}))}});
;dwfis.define("widget/fans-icon",function(n,i,s){function a(n,i,s){return!$.isNumeric(n)||parseInt(n,10)<1||!i?"":"<span"+(s?' data-id="'+s+'"':"")+' class="fans-icon fans-icon-'+n+'">'+i+"</span>"}s.exports={create:a}});
;dwfis.define("widget/fansbadge",function(require,exports,module){function getBadgeList(a){a="function"==typeof a?a:function(){},TTP.isH5?TTP.ready(function(e){e.addTafListener("queryBadgeInfoList",function(n){a(n.param?n.param:n),e.removeTafListener("queryBadgeInfoList")});var n=new HUYA.BadgeInfoListReq;n.tUserId=e.userId,e.sendWup("liveui","queryBadgeInfoList",n)}):(TTP.one("GetFansBadgeListResp",function(e){a(e.param?e.param:e)}),TTP.ready(function(a){a.callAs("GetFansBadgeListReq")}))}function badgeUseReq(a,e){e="function"==typeof e?e:function(){},TTP.ready(TTP.isH5?function(n){n.addTafListener("useBadge",function(a){e(a.param?a.param:a),n.removeTafListener("useBadge")});var t=new HUYA.BadgeReq;t.tUserId=n.userId,t.lBadgeId=a,n.sendWup("liveui","useBadge",t)}:function(n){TTP.one("UseFansBadgeResp",function(a){e(a.param?a.param:a)}),n.callAs("UseFansBadgeReq",{lBadgeId:a})})}function getBadgeInfo(a,e){e="function"==typeof e?e:function(){},TTP.ready(TTP.isH5?function(n){n.addTafListener("getBadgeName",function(a){e(a.param?a.param:a),n.removeTafListener("getBadgeName")});var t=new HUYA.BadgeReq;t.tUserId=n.userId,t.lBadgeId=a,n.sendWup("liveui","getBadgeName",t)}:function(n){TTP.one("GetFansBadgeNameResp",function(a){e(a.param?a.param:a)}),n.callAs("GetFansBadgeNameReq",{lBadgeId:a})})}function Badge(a){function e(a){if(a=a.param?a.param:a,a.iNewBadge)t.push(a.tBadgeInfo),n.emit("change",a);else{var e=s(a.tBadgeInfo.lBadgeId);e&&($.extend(e,a.tBadgeInfo),n.emit("change",a,e===i))}}var n=new Event,t=a.vBadgeInfo&&a.vBadgeInfo.value&&a.vBadgeInfo.value.length?a.vBadgeInfo.value:[],d=a.lUsingBadgeId;1===t.length&&0!==a.lUsingBadgeId&&(d=t[0].lBadgeId);var s=function(a){var e=null;return $.each(t,function(n,t){return t&&t.lBadgeId==a?(e=t,!1):void 0}),e},i=s(d),r=function(a){if(a!=d){var e=i;if(0===a)badgeUseReq(0),d=0,i=null,n.emit("use",i,e,-1);else{var r=s(a);r&&(badgeUseReq(a,function(){}),d=a,i=r,n.emit("use",i,e,indexOf.call(t,i)))}}};return TTP.isH5?TTP.ready(function(a){a.addTafListener("6232",e)}):TTP.on("FansBadgeUpNotice",e),{use:r,onUse:function(a){n.on("use",a)},onChange:function(a){n.on("change",a)},getItem:s,all:function(){return t},eq:function(a){return t[a]?$.extend({},t[a]):null},total:function(){return t.length},current:function(){return i?$.extend({},i):i}}}function init(a){var e=function(){var a=$.Deferred(),e=$.Deferred(),n=$.when(a,e);getBadgeList(function(e){a.resolve(e)}),getBadgeInfo(anchor.lp,function(a){e.resolve(a)});var t=setTimeout(function(){a.reject(),e.reject()},6e4);return n.done(function(){clearTimeout(t)}),n}();!function(){function a(){clearTimeout(t),$("#J_fansBadgeDetail").show(),d||(d=!0,$("#J_fansBadgeDetail").html(tpl_loading()))}function n(){t=setTimeout(function(){$("#J_fansBadgeDetail").hide()},200)}var t,d;$("#chatHostPic").on("mouseenter.loading",a).on("mouseleave.loading",n),$("#J_fansBadgeDetail").on("mouseenter.loading",a).on("mouseleave.loading",n),e.always(function(){$("#J_chatFansBadge").removeClass("chat-fansbadge-loading"),$("#chatHostPic").off("mouseenter.loading").off("mouseleave.loading"),$("#J_fansBadgeDetail").off("mouseenter.loading").off("mouseleave.loading").empty()})}();var n;e.done(function(a,e){function t(){var a=n.current();i.html(n.current()?fansIcon.create(a.iBadgeLevel,a.sBadgeName):n.total()>0?'<i class="badge-null"></i>':'<i class="badge-empty"></i>')}function d(){r.html(n.current()?tpl_badge({data:n.current()}):n.total()>0?tpl_null({total:n.total()}):tpl_empty({data:e}))}function s(){n.total()>0&&(l.empty(),l.html(tpl_list({data:n.all(),currenBadge:n.current()})))}n=new Badge(a);var i=$("#J_chatFansBadge");t(),n.onUse(t),n.onChange(function(a,e){e&&a.iBadgeLevelChanged&&t(),a.iNewBadge&&!n.current()&&i.html('<i class="badge-null"></i>')});var r=$("#J_fansBadgeDetail");d(),n.onUse(d),n.onChange(function(a,e){e&&r.html(tpl_badge({data:n.current()})),a.iNewBadge&&!n.current()&&r.html(tpl_null({total:n.total()}))});var l=$("#J_fansBadgeList");s(),n.onChange(function(a){a.iNewBadge&&s()}),n.onUse(function(a,e,n){var t=l.find("li");t.removeClass("on"),-1!=n&&t.eq(n).addClass("on")}),l.on("click","li",function(a){a.preventDefault();var e=$(this).index();n.use(n.eq(e).lBadgeId)}).on("click",".fansBadge-itemNull",function(a){a.preventDefault(),n.use(0)});var o,g,f=function(){clearTimeout(o),r.show()},u=function(){clearTimeout(o),o=setTimeout(function(){r.hide()},200)},c=function(){if(clearTimeout(g),l.show(),f(),n.total()>8){var a=l.find(".fansBadge-items");a.data("jsp")||a.jScrollPane({mouseWheelSpeed:20,verticalGutter:0,isOutsideNotPrevent:!1})}},_=function(){clearTimeout(g),g=setTimeout(function(){l.hide()},200)};$("#J_chatFansBadge").on("mouseenter",f).on("mouseleave",u),r.on("mouseenter",f).on("mouseleave",u),r.on("mouseenter",".J_showfansBadgeList",c).on("mouseleave",".J_showfansBadgeList",_),l.on("mouseenter",c).on("mouseleave",function(){_(),u()});var p=$("#J_fansBadgeTip");n.onChange(function(a){function e(){p.empty().hide(),a=null}function e(){clearInterval(t),p.empty().hide(),a=null}if(a.iNewBadge)p.html(tpl_new({data:a.tBadgeInfo})),p.show(),p.find(".J_fansBadgeTipUse").on("click",function(t){t.preventDefault(),n.use(a.tBadgeInfo.lBadgeId),e()}),p.find(".J_fansBadgeTipClose").on("click",function(a){a.preventDefault(),e()});else if(a.iBadgeLevelChanged){var t,d=5;p.html(tpl_up({data:a.tBadgeInfo,timeout:d})),p.show(),p.find(".J_fansBadgeTipClose").on("click",function(a){a.preventDefault(),e()});var s=p.find(".J_fansBadgeTipCd");t=setInterval(function(){s.text(--d),0===d&&e()},1e3)}})}),e.fail(function(){n=new Badge({vBadgeInfo:{value:[]}}),$("#J_chatFansBadge").removeClass("chat-fansbadge-loading").html('<i class="badge-null"></i>')}),e.always(function(){a(n)})}var anchor=require("TTA"),TTP=require("TTP"),Event=require("Event"),indexOf=[].indexOf||function(a){for(var e=0,n=this.length;n>e;e++)if(this[e]===a)return e;return-1},fansIcon=require("widget/fans-icon"),tpl_badge=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-badge">\r\n            <p class="badge-icon">'+(null==(__t=fansIcon.create(data.iBadgeLevel,data.sBadgeName))?"":__t)+'</p>\r\n            <div class="badge-score">\r\n                <span class="badge-lv">Lv'+(null==(__t=data.iBadgeLevel)?"":__t)+'</span>\r\n                <p class="badge-progress"><i style="width:'+(null==(__t=data.iScore/data.iNextScore*100)?"":__t)+'%;"></i><span>'+(null==(__t=data.iScore)?"":__t)+"/"+(null==(__t=data.iNextScore)?"":__t)+'</span></p>\r\n                <a class="fansBadge-qm" target="_blank" href="http://hd.huya.com/0301fans/index.html"></a>\r\n            </div>\r\n            <p class="badge-rank">\u6392\u540d <em class="fansBadge-hig">'+(null==(__t=data.iRank)?"":__t)+'</em></p>\r\n            <div class="badge-update">\r\n            ',__p+=data.iQuotaUsed>0?'\r\n                <div class="badge-update-up">\r\n                    <p><i class="fansBadge-stateUp update-state"></i>\u4eca\u65e5\u4eb2\u5bc6\u5ea6<em>+'+(null==(__t=data.iQuotaUsed)?"":__t)+"</em></p>\r\n                    <p>\u4eca\u65e5\u4eb2\u5bc6\u5ea6\u4e0a\u6da8\u4e0a\u9650<em>"+(null==(__t=data.iQuotaUsed)?"":__t)+"/"+(null==(__t=data.iQuota)?"":__t)+"</em></p>\r\n                </div>\r\n            ":data.iQuotaUsed<0?'\r\n                <div class="badge-update-down">\r\n                    <p><i class="fansBadge-stateDown update-state"></i>\u4eca\u65e5\u4eb2\u5bc6\u5ea6<em>'+(null==(__t=data.iQuotaUsed)?"":__t)+"</em>\uff0c\u51cf\u5c11\u52300\u5c06\u5931\u53bb\u5fbd\u7ae0</p>\r\n                    <p>\u8d60\u9001\u4e3b\u64ad\u793c\u7269\uff0c\u4eb2\u5bc6\u5ea6\u4f1a\u91cd\u65b0\u4e0a\u6da8~</p>                \r\n                </div>\r\n            ":'\r\n                <div class="badge-update-in">\r\n                    <p><i class="fansBadge-stateStop update-state"></i>\u4eca\u65e5\u4eb2\u5bc6\u5ea6<em>+'+(null==(__t=data.iQuotaUsed)?"":__t)+"</em>\uff0c\u8fde\u7eed7\u5929\u65e0\u589e\u957f\uff0c\u4eb2\u5bc6\u5ea6\u4f1a\u4e0b\u964d\u54e6\uff01</p>\r\n                </div>\r\n            ",__p+='\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more J_showfansBadgeList" href="#">\u5207\u6362\u5fbd\u7ae0 <i>&gt;</i></a>\r\n</div>';return __p},tpl_null=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-null">\r\n            <img src="'+(null==(__t="//a.dwstatic.com/huya/main/widget/fansbadge/img/a_cf56f98.png")?"":__t)+'" />\r\n            <p class="res">\u5f53\u524d\u6ca1\u6709\u4f69\u6234\u5fbd\u7ae0 <a class="fansBadge-qm" target="_blank" href="http://hd.huya.com/0301fans/index.html"></a></p>\r\n            <p class="tip">\u60a8\u6709<em class="fansBadge-hig">'+(null==(__t=total)?"":__t)+'\u4e2a</em>\u53ef\u4f69\u6234\u7684\u5fbd\u7ae0\u54e6\uff01</p>\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more J_showfansBadgeList" href="#">\u5207\u6362\u5fbd\u7ae0 <i>&gt;</i></a>\r\n</div>';return __p},tpl_empty=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-empty">\r\n            <img src="'+(null==(__t="//a.dwstatic.com/huya/main/widget/fansbadge/img/c_b6c5cf4.png")?"":__t)+'" />\r\n            <p class="res">\u60a8\u6ca1\u6709\u5fbd\u7ae0\u53ef\u4f69\u6234 <a class="fansBadge-qm" target="_blank" href="http://hd.huya.com/0301fans/index.html"></a></p>\r\n            ',__p+=data.lBadgeId&&data.sBadgeName?'\r\n                <p class="tip">\u4e00\u6b21\u6027\u9001<em class="fansBadge-hig">10\u4e2a\u793c\u7269</em>\u53ef\u4ee5\u6210\u4e3a\u7c89\u4e1d\uff0c<br />\u83b7\u5f97\u5fbd\u7ae0: '+(null==(__t=fansIcon.create(1,data.sBadgeName))?"":__t)+"</p>\r\n            ":'\r\n                <p class="tip">\u5f53\u524d\u4e3b\u64ad\u8fd8\u6ca1\u6709\u5f00\u901a\u7c89\u4e1d\u5fbd\u7ae0</p>\r\n            ',__p+='\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more" target="_blank" href="http://hd.huya.com/0301fans/index.html">\u8be6\u60c5 <i>&gt;</i></a>\r\n</div>';return __p},tpl_loading=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-loading">\r\n            <img src="'+(null==(__t="//a.dwstatic.com/huya/main/widget/fansbadge/img/b_f77bd96.png")?"":__t)+'" />\r\n            <p>\u52aa\u529b\u83b7\u53d6\u6570\u636e\u4e2d\uff0c\u8bf7\u7a0d\u7b49\u7247\u523b <a class="fansBadge-qm" target="_blank" href="http://hd.huya.com/0301fans/index.html"></a></p>\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more" target="_blank" href="http://hd.huya.com/0301fans/index.html">\u8be6\u60c5 <i>&gt;</i></a>\r\n</div>';return __p},tpl_list=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u9009\u62e9\u4f60\u8981\u4f69\u6234\u7684\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-items">\r\n        <ul>\r\n        ';for(var i=0,l=data.length;l>i;i++){var badge=data[i];__p+="\r\n            <li"+(null==(__t=currenBadge&&currenBadge.lBadgeId==badge.lBadgeId?' class="on"':"")?"":__t)+">\r\n                "+(null==(__t=fansIcon.create(badge.iBadgeLevel,badge.sBadgeName))?"":__t)+'\r\n                <span class="nick">'+(null==(__t=badge.sPresenterNickName)?"":_.escape(__t))+"</span>\r\n            </li>\r\n        "}__p+='\r\n        </ul>\r\n    </div>\r\n    <a class="fansBadge-itemNull" href="#">\u4e0d\u4f69\u6234\u4efb\u4f55\u5fbd\u7ae0</a>\r\n</div>'}return __p},tpl_up=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-tip-up">\r\n        <p>\u606d\u559c\u60a8\u62e5\u6709\u7684 '+(null==(__t=fansIcon.create(data.iBadgeLevel,data.sBadgeName))?"":__t)+' \u7c89\u4e1d\u5fbd\u7ae0\u5347\u7ea7\u4e86\uff01</p>\r\n        <div class="fansBadge-tip-ft">\r\n            <a href="#" class="J_fansBadgeTipClose">\u6211\u77e5\u9053\u4e86(<i class="J_fansBadgeTipCd">'+(null==(__t=timeout)?"":__t)+"</i>)</a>\r\n        </div>\r\n    </div>\r\n</div>";return __p},tpl_new=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-tip-new">\r\n        <p>\u606d\u559c\u60a8\u83b7\u5f97 '+(null==(__t=fansIcon.create(data.iBadgeLevel,data.sBadgeName))?"":__t)+' \u7c89\u4e1d\u5fbd\u7ae0\uff01</p>\r\n        <div class="fansBadge-tip-ft">\r\n            <a href="#" class="J_fansBadgeTipUse">\u7acb\u5373\u4f69\u6234</a>\r\n            <a href="#" class="J_fansBadgeTipClose">\u5173\u95ed</a>\r\n        </div>\r\n    </div>\r\n</div>';return __p},badgeReady=$.Deferred();if(HUYA_UTIL.getCookieVal("yyuid"))init(function(a){badgeReady.resolve(a)});else{var badge=new Badge({vBadgeInfo:{value:[]}});$("#J_chatFansBadge").removeClass("chat-fansbadge-loading").html('<i class="badge-null"></i>'),badgeReady.resolve(badge)}return{ready:function(a){badgeReady.done(a)}}});
;dwfis.define("layer",function(){var t={centerOnScreen:function(t){var i=($(window),document.documentElement,Math.floor(($(window).width()-t.width())/2)),s=Math.floor(($(window).height()-t.height())/2);t.css({left:i+"px",top:s+"px"})},Mask:{mask:null,show:function(){return this.mask||(this.mask=$("<div id='mask'></div>")),"none"===this.mask.css("display")?this.mask.show():$("body").append(this.mask),this},hide:function(){return this.mask.hide(),this},destory:function(t){this.mask.remove(),t&&(this.mask=null)}},PopupBox:{popupBox:null,setting:{isDefault:!1,content:"",existMask:!0},createBox:function(){var t=$("<div class='popup-box'></div>");t.hide().appendTo($("body")),this.popupBox=t},show:function(i){$.extend(this.setting,i,!0),this.popupBox||this.createBox();var s=this.popupBox;if(this.setting.isDefault){var o="<h3 class='popup-box-title'>\u6e29\u99a8\u63d0\u793a</h3><a href='#' class='popup-box-close-btn close' title='\u5173\u95ed'>\u5173\u95ed</a>";o+="<div class='popup-box-content'>",o+=this.setting.content,o+="</div>",s.html(o)}else s.html("").append(this.setting.content);var e="<iframe style='width:";e+=s.width()+"px; height:"+s.height(),e+="px; position:absolute; left:0; top:0; z-index:-1; background-color:#000;filter: alpha(opacity=0);opacity: 0;'></iframe>",s.prepend(e),s.find(".js-close").click(function(){return t.PopupBox.close(),!1}),t.centerOnScreen(s),this.setting.existMask&&t.Mask.show(),s.show().focus()},close:function(){this.popupBox&&(this.popupBox.hide(),this.setting.existMask&&t.Mask.hide())},destory:function(){this.close(),this.popupBox.remove(),this.popupBox=null}}};return t});
;dwfis.define("formatNumber",function(){function r(r,t){for(var e=r?r.toString().split("."):["0"],s=t?t.split("."):[""],a="",n=e[0],u=s[0],i=n.length-1,b=!1,f=u.length-1;f>=0;f--)switch(u.substr(f,1)){case"#":i>=0&&(a=n.substr(i--,1)+a);break;case"0":a=i>=0?n.substr(i--,1)+a:"0"+a;break;case",":b=!0,a=","+a}if(i>=0)if(b)for(var m=n.length;i>=0;i--)a=n.substr(i,1)+a,i>0&&(m-i)%3==0&&(a=","+a);else a=n.substr(0,i+1)+a;a+=".",n=e.length>1?e[1]:"",u=s.length>1?s[1]:"",i=0;for(var f=0;f<u.length;f++)switch(u.substr(f,1)){case"#":i<n.length&&(a+=n.substr(i++,1));break;case"0":a+=i<n.length?n.substr(i++,1):"0"}return a.replace(/^,+/,"").replace(/\.$/,"")}var t={isFormatNumber:!1,formatNumber:function(r){var t=Number(r);return t&&t>1e4?(t/1e4).toFixed(1)+"\u4e07":t},formatNumber2:r,fnFormat:function(r){if(!this.isFormatNumber){var t=r.find(".js-num"),e=this;t.each(function(r,t){var s=$.trim($(t).text());$(t).text(e.formatNumber(s))}),this.isFormatNumber=!0}}};return t});
;dwfis.define("widget/room-youlike",function(require,exports,module){function RoomYoulike(){this.initialize.apply(this,arguments)}var format=require("formatNumber"),TTR=require("TTR");RoomYoulike.prototype={initialize:function(){TTR.gid?this.getData():($(".youlike").remove(),$(".comp_huya_match_guess_new").remove())},createHtml:function(t,a){var i=this;this.$youlikeList.html(this.tmpl({list:this.dataList.slice(t-1,a),eid:"click/position",position:"room/cnxh",gameType:!0,rankStart:t})),this.$youlikeList.find("img").lazyload({container:$("#main_col")}),$(window).one("load.youlike",function(){i.$youlikeList.find("img").trigger("appear")})},getData:function(){var _this=this;$.getJSON(TT.app.main+"cache10min.php",{m:"Live","do":"getProfileRecommendList",gid:TTR.gid},function(json){200==json.status&&json.data.length>0?(json.data.length<=6&&$(".youlike-page").remove(),_this.dataList=json.data,_this.tmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0,len=list.length;len>i;i++){var data=list[i];if(!window.G_AREAFIB||!_.contains(G_blackListForBoss,parseInt(data.gid,10))){__p+='\r\n<li class="game-live-item">\r\n    ';var url=APP_URL+data.privateHost,seat="";if(1==data.screenType&&2==data.liveSourceType)var screenshot=data.screenshot+"?imageview/4/0/w/190/h/338/rotate/270";else var screenshot=data.screenshot+"?imageview/4/0/w/338/h/190/blur/1";if(seat="undefined"==typeof rankStart?position+"/"+(i+1):position+"/"+(rankStart+i),__p+='\r\n    <a href="'+(null==(__t=url)?"":__t)+'" class="video-info new-clickstat" target="_blank" report=\'{"eid":"'+(null==(__t=eid)?"":__t)+'","position":"'+(null==(__t=seat)?"":__t)+'","game_id":"'+(null==(__t=data.gid)?"":__t)+'","ayyuid":"'+(null==(__t=data.uid)?"":__t)+'"}\'>\r\n        <img class="pic" data-original="'+(null==(__t=screenshot)?"":__t)+'" src="images/default_live.jpg" alt="'+(null==(__t=data.nick)?"":__t)+'\u7684\u76f4\u64ad" title="'+(null==(__t=data.nick)?"":__t)+'\u7684\u76f4\u64ad">\r\n        ',data.recommendTagName&&(__p+='<em class="tag tag-recommend">'+(null==(__t=data.recommendTagName)?"":__t)+"</em>"),__p+='\r\n        <div class="item-mask"></div>\r\n        <i class="btn-link__hover_i"></i>\r\n        ',"undefined"==typeof rankStart&&1==data.isBluRay&&(__p+='<em class="tag tag-blue">\u84dd\u5149</em>'),__p+="\r\n        ","undefined"!=typeof rankStart&&(__p+='\r\n            <em class="tag tag-rank tag-rank-'+(null==(__t=rankStart+i)?"":__t)+'">No.'+(null==(__t=rankStart+i)?"":__t)+"</em>\r\n        "),__p+='\r\n    </a>\r\n    <a href="'+(null==(__t=url)?"":__t)+'" class="title new-clickstat" target="_blank" report=\'{"eid":"'+(null==(__t=eid)?"":__t)+'","position":"'+(null==(__t=seat)?"":__t)+'","game_id":"'+(null==(__t=data.gid)?"":__t)+'","ayyuid":"'+(null==(__t=data.uid)?"":__t)+'"}\' title="'+(null==(__t=HUYA_UTIL.xssFilter(data.introduction))?"":__t)+'" target="_blank">'+(null==(__t=HUYA_UTIL.xssFilter(data.introduction))?"":__t)+'</a>\r\n    <span class="txt">\r\n        <span class="avatar fl">\r\n            <img data-original="'+(null==(__t=data.avatar180)?"":__t)+'" src="images/default_profile.jpg" alt="'+(null==(__t=data.nick)?"":__t)+'" title="'+(null==(__t=data.nick)?"":__t)+'">\r\n            <i class="nick" title="'+(null==(__t=data.nick)?"":__t)+'">'+(null==(__t=HUYA_UTIL.xssFilter(data.nick))?"":__t)+"</i>\r\n        </span>\r\n        ",gameType){if(""!=data.gameHostName)var gameTypeUrl=window.APP_URL+"g/"+data.gameHostName;else var gameTypeUrl=window.APP_URL+"g/"+data.gid;__p+='\r\n        <span class="game-type fr"><a target="_blank" href="'+(null==(__t=gameTypeUrl)?"":__t)+'" title="'+(null==(__t=data.gameFullName)?"":__t)+'">'+(null==(__t=data.gameFullName)?"":__t)+"</a></span>\r\n        "}__p+='\r\n        <span class="num"><i class="num-icon"></i><i class="js-num">'+(null==(__t=format.formatNumber(data.totalCount))?"":__t)+"</i></span>\r\n    </span>\r\n</li>\r\n"}}__p+="\r\n"}return __p},_this.$youlikeList=$("#youlike-list"),_this.createHtml(1,6),$(".youlike-page").length>0&&_this.bindEvent(),DUYA_SUB.publish("roomRespondCard")):($(".youlike").remove(),$(".comp_huya_match_guess_new").remove())})},bindEvent:function(){function t(){var t=3*(e-1)+1,a=3*e+3>=n.dataList.length?n.dataList.length:3*e+3;n.createHtml(t,a)}var a=$(".youlike-prev"),i=$(".youlike-next"),e=1,n=this;a.on("click",function(){var a=$(this);return a.hasClass("disable")?!1:(i.removeClass("disable"),e--,1==e&&a.addClass("disable"),void t())}),i.on("click",function(){var i=$(this);return i.hasClass("disable")?!1:(a.removeClass("disable"),e++,3*e+3>=n.dataList.length&&i.addClass("disable"),void t())})}},window.RoomYoulike=RoomYoulike,$("#youlike-list").length&&new RoomYoulike});
;dwfis.define("widget/room-video",function(require,exports,module){var anchor=require("TTA"),godLens={init:function(){this.getlistbyuid()},getlistbyuid:function(){var $huyaVideo=$("#huya-video"),tmpl="";$huyaVideo.length>0&&$.getJSON("http://v.huya.com/index.php?callback=?",{r:"api/getlistbyuid",uid:anchor.lp},function(json){json&&json.length>0?(tmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var data,i=0,len=aData.length;len>i;i++)data=aData[i],__p+='\r\n<li class="game-live-item">\r\n    <a href="'+(null==(__t=data.video_url)?"":__t)+'" class="video-info clickstat" target="_blank" eid="click/zhibo/tjwz/video'+(null==(__t=i+1)?"":__t)+'" eid_desc="\u70b9\u51fb/\u76f4\u64ad\u95f4/\u63a8\u8350\u4f4d\u7f6e/\u89c6\u9891'+(null==(__t=i+1)?"":__t)+'">\r\n        <img class="pic" data-original="'+(null==(__t=data.video_cover.replace("220x124","460x268"))?"":__t)+'" alt="'+(null==(__t=data.video_title)?"":__t)+'" src="images/default_live.jpg">\r\n        <span class="video_duration">'+(null==(__t=data.video_duration)?"":__t)+'</span>\r\n        <div class="item-mask"></div>\r\n        <i class="btn-link__hover_i"></i>\r\n        ',data.rank&&(__p+='\r\n        <em class="tag tag-recommend">\r\n            ',data.rank.indexOf("NO.")>-1&&(__p+="\r\n            <span></span>\r\n            "),__p+="\r\n            "+(null==(__t=data.rank)?"":__t)+"\r\n        </em>\r\n        "),__p+='\r\n    </a>\r\n    <a href="'+(null==(__t=data.video_url)?"":__t)+'" class="title clickstat" target="_blank" id="click/zhibo/tjwz/video'+(null==(__t=i+1)?"":__t)+'" eid_desc="\u70b9\u51fb/\u76f4\u64ad\u95f4/\u63a8\u8350\u4f4d\u7f6e/\u89c6\u9891'+(null==(__t=i+1)?"":__t)+'">'+(null==(__t=data.video_title)?"":_.escape(__t))+'</a>\r\n    <div class="txt">\r\n	    <span class="avatar fl">\r\n	        <img alt="'+(null==(__t=data.video_title)?"":_.escape(__t))+'" data-original="'+(null==(__t=data.user_avatar)?"":__t)+'" src="images/default_profile.jpg"> \r\n	    	<i class="nick" title="'+(null==(__t=data.user_nickname)?"":_.escape(__t))+'"> '+(null==(__t=data.user_nickname)?"":_.escape(__t))+'</i>\r\n	    </span>\r\n        <span class="num"><i class="num-icon"></i><i class="js-num">'+(null==(__t=data.video_play_num)?"":__t)+"</i></span>\r\n    </div>\r\n</li>\r\n";__p+="\r\n"}return __p},$huyaVideo.html(tmpl({aData:json.slice(0,6)})),DUYA_SUB.publish("roomRespondCard"),$huyaVideo.find("img").lazyload({container:$("#main_col"),threshold:100})):$(".huya-video").remove()})}};godLens.init()});
;dwfis.define("respondCard",function(t,e,i){function n(){this.initialize.apply(this,arguments)}n.prototype={initialize:function(t){this.$wrapElement=$(t.wrapElement),this.$itemElement=this.$wrapElement.find(t.itemElement),this.itemWidth=this.$itemElement.outerWidth(),this.createCsstext=t.createCsstext,this.iMargin=this.$itemElement.outerWidth(!0)-this.itemWidth,this.scale=t.scale,this.calculation(),this.bindEvent()},_importStyle:function(t,e){if(!document.getElementById(e)){var i=document.createElement("style");if(e&&(i.id=e),document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet){if(document.getElementsByTagName("style").length>31)throw new Error("Exceed the maximal count of style tags in IE");i.styleSheet.cssText=t}else i.innerHTML=t}},calculation:function(){var t=this.$wrapElement.innerWidth(),e=Math.floor(t/(this.itemWidth+this.iMargin)),i=Math.floor(t/e)-this.iMargin,n=Math.floor(i/this.scale),s=this.createCsstext(i,n),l=document.getElementById("respondStyle");l?l.styleSheet?l.styleSheet.cssText=s:l.innerHTML=s:this._importStyle(s,"respondStyle")},bindEvent:function(){var t=this;$(window).on("resize.responseCard",function(){t.calculation()})}},i.exports=n});
;dwfis.define("app/room_normal",function(t){{var e=t("TTP"),o=t("TTR"),i=t("h5playeOnloadReport"),r=t("liveRoomPvReport"),a=t("liveRoomDurationReport");t("tools")}t("room_core"),t.async("roomMakeMoney");var n=$(".chat-room__hd").find(".current").attr("tab_index");t.async("widget/room-hd-activity/roomActivity.js"),t("widget/room-youlike"),t("widget/room-video");var h=t("respondCard"),c=_.once(function(){var t=new h({wrapElement:".recom-list",itemElement:".game-live-item",scale:280/158,createCsstext:function(t,e){var o=".recom-list .game-live-item {width:"+t+"px!important;}";return o+=".recom-list {height:"+(e+70)+"px!important;}",o+=".recom-list .video-info {height:"+e+"px!important;}"}});DUYA_SUB.subscribe("sidebarShow",function(){setTimeout(function(){t.calculation()},0)}),DUYA_SUB.subscribe("sidebarHide",function(){setTimeout(function(){t.calculation()},0)})});DUYA_SUB.subscribe("roomRespondCard",function(){c()});var s=function(){var t=$(window),e=9/16,i=$(".room-player-wrap"),r=$(".chat-room__panel"),a=$("#J_playerMain"),h=$(".chat-room__other"),c=$(".room-sidebar"),s=$(".chat-room__hd").outerHeight(!0),m=$(".room-hd").outerHeight(!0),d=$("#duya-header").height(),l=$("#tipsOrchat"),p=l.height(),u=100,_=$(".week-rank").length>0?130:0;return o.isReplay&&(u=40),function(){var o=parseInt(a.width()*e)+u,l=t.height()-m-d-10;if(o>l&&(o=l,a.css({height:"100%","padding-bottom":0})),i.height(o),r.height(c.height()-p-s-_),h.height(c.height()-p-s-_),$(".chat-room__bd4").height(c.height()-p-s-_),3!=n){var g=$(".chat-room__bd"+n).find(".chat-roomOther__scroll");g.data("jsp")&&g.data("jsp").reinitialise()}}}();DUYA_SUB.subscribe("resizeWide",function(){s()}),s(),function(){var t=o.state.toLowerCase();e.isH5&&e.onload(function(){i({state:t,type:0})}),r({state:t,type:0,player:e.isH5?0:1}),o.isOn&&a({type:0})}()});