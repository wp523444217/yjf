dwfis.define("widget/backtotop",function(require,exports,module){var backtotop={init:function(){this.render(),this.scrollFn()},render:function(){var _tpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div class="hy-side" id="J_hySide">\r\n    <div class="hy-side-nav">\r\n        <div class="hy-side-nav-item hover-download">\r\n            <a class="clickstat" target="_blank" href="http://www.huya.com/download/" eid="click/navi/right/download" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u4e0b\u8f7d">\r\n                <i class="hy-side-nav-phone"></i>\r\n                <p class="hy-side-nav-txt">\u4e0b\u8f7d</p>\r\n            </a>\r\n            <div class="hy-side-nav-download">\r\n                <a class="clickstat side-nav-download1" target="_blank" href="http://www.huya.com/download/" eid="click/navi/right/download" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u4e0b\u8f7d">\u4e0b\u8f7dAPP</a>\r\n                <a class="clickstat side-nav-download2" target="_blank" href="http://www.huya.com/download/#tv" eid="click/navi/right/download" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u4e0b\u8f7d">\u4e0b\u8f7dTV\u7248</a>\r\n            </div>\r\n        </div>\r\n        <a class="hy-side-nav-item clickstat" target="_blank" href="http://www.huya.com/e/zhubo" eid="click/navi/right/shower" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u6211\u8981\u76f4\u64ad">\r\n            <i class="hy-side-nav-video"></i>\r\n            <p class="hy-side-nav-txt">\u5f00\u64ad</p>\r\n        </a>\r\n        <a class="hy-side-nav-item clickstat" target="_blank" href="http://blog.huya.com/product/81" eid="click/navi/right/kefu" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u5ba2\u670d">\r\n            <i class="hy-side-nav-qa"></i>\r\n            <p class="hy-side-nav-txt">\u53cd\u9988</p>\r\n        </a>\r\n        <a class="hy-side-nav-item clickstat" target="_blank" href="http://help.huya.com" eid="click/navi/right/help" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u5e2e\u52a9">\r\n            <i class="hy-side-nav-help"></i>\r\n            <p class="hy-side-nav-txt">\u5e2e\u52a9</p>\r\n        </a>\r\n        <a class="hy-side-nav-item" id="J_hyBackToTop" style="display:none;" href="#">\r\n            <i class="hy-side-nav-top"></i>\r\n            <p class="hy-side-nav-txt">\u9876\u90e8</p>\r\n        </a>\r\n    </div>\r\n</div>';return __p};$("body").append(_tpl())},scrollFn:function(){var a=null,i=$("#J_hyBackToTop"),n=$(".js-responded-list");0==n.length&&(n=$(window)),n.on("scroll",function(){clearTimeout(a),a=setTimeout(function(){n.scrollTop()>200?i.show():i.hide()},60)}),i.click(function(a){a.preventDefault(),n[0]===window?$("html,body").animate({scrollTop:0},500):n.animate({scrollTop:0},500)})}};backtotop.init()});
;dwfis.define("respondHeight",function(e,i,n){function h(e){function i(){e.css({height:h.height()-n.height()})}var n=$("#duya-header"),h=$(window);DUYA_SUB.subscribe("resizeWide",i),i()}n.exports=h});
;dwfis.define("respondCard",function(t,e,i){function n(){this.initialize.apply(this,arguments)}n.prototype={initialize:function(t){this.$wrapElement=$(t.wrapElement),this.$itemElement=this.$wrapElement.find(t.itemElement),this.itemWidth=this.$itemElement.outerWidth(),this.createCsstext=t.createCsstext,this.iMargin=this.$itemElement.outerWidth(!0)-this.itemWidth,this.scale=t.scale,this.calculation(),this.bindEvent()},_importStyle:function(t,e){if(!document.getElementById(e)){var i=document.createElement("style");if(e&&(i.id=e),document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet){if(document.getElementsByTagName("style").length>31)throw new Error("Exceed the maximal count of style tags in IE");i.styleSheet.cssText=t}else i.innerHTML=t}},calculation:function(){var t=this.$wrapElement.innerWidth(),e=Math.floor(t/(this.itemWidth+this.iMargin)),i=Math.floor(t/e)-this.iMargin,n=Math.floor(i/this.scale),s=this.createCsstext(i,n),l=document.getElementById("respondStyle");l?l.styleSheet?l.styleSheet.cssText=s:l.innerHTML=s:this._importStyle(s,"respondStyle")},bindEvent:function(){var t=this;$(window).on("resize.responseCard",function(){t.calculation()})}},i.exports=n});
;dwfis.define("app/game-list",function(i){i("widget/backtotop");var e=i("respondHeight"),t=i("respondCard"),a=$(".js-responded-list");e(a);var s=new t({wrapElement:"#js-game-list",itemElement:".game-list-item",scale:.67,createCsstext:function(i,e){var t=".game-list .game-list-item {width:"+i+"px!important;}";return t+=".game-list .pic-img {height:"+e+"px!important;}"}});$(".game-list").css("visibility","visible"),DUYA_SUB.subscribe("sidebarShow",function(){a.addClass("narrow"),s.calculation()}),DUYA_SUB.subscribe("sidebarHide",function(){a.removeClass("narrow"),s.calculation()}),$(".game-list .pic-img").lazyload({container:a,threshold:100})});
;!function(e,t,i,n){var r=/\/yysnapshot\//,o=e(t);e.fn.lazyload=function(a){function l(){var t=0;c.each(function(){var i=e(this);if(!s.skip_invisible||i.is(":visible"))if(e.abovethetop(this,s)||e.leftofbegin(this,s));else if(e.belowthefold(this,s)||e.rightoffold(this,s)){if(++t>s.failure_limit)return!1}else i.trigger("appear"),t=0})}var f,c=this,s={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,error:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return a&&(n!==a.failurelimit&&(a.failure_limit=a.failurelimit,delete a.failurelimit),n!==a.effectspeed&&(a.effect_speed=a.effectspeed,delete a.effectspeed),e.extend(s,a)),f=s.container===n||s.container===t?o:e(s.container),0===s.event.indexOf("scroll")&&f.bind(s.event,function(){return l()}),this.each(function(){var i=this,o=e(i);i.loaded=!1,(o.attr("src")===n||o.attr("src")===!1)&&o.is("img")&&o.attr("src",s.placeholder),o.one("appear",function(){if(!this.loaded){if(s.appear){var n=c.length;s.appear.call(i,n,s)}var a=o.attr("data-"+s.data_attribute);t.isSupportWebp&&r.test(a)&&(a+="/format/webp");var l=new Image;l.onload=function(){o.is("img")?o.attr("src",a):o.css("background-image","url('"+a+"')"),i.loaded=!0;var t=e.grep(c,function(e){return!e.loaded});if(c=e(t),s.load){var n=c.length;s.load.call(i,n,s)}i.onerror=null,l.onload=null,l.onerror=null,l=null},l.src=a}}),0!==s.event.indexOf("scroll")&&o.bind(s.event,function(){i.loaded||o.trigger("appear")})}),o.bind("resize",function(){l()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&c.each(function(){e(this).trigger("appear")})}),e(i).ready(function(){l()}),this},e.belowthefold=function(i,r){var a;return a=r.container===n||r.container===t?(t.innerHeight?t.innerHeight:o.height())+o.scrollTop():e(r.container).offset().top+e(r.container).height(),a<=e(i).offset().top-r.threshold},e.rightoffold=function(i,r){var a;return a=r.container===n||r.container===t?o.width()+o.scrollLeft():e(r.container).offset().left+e(r.container).width(),a<=e(i).offset().left-r.threshold},e.abovethetop=function(i,r){var a;return a=r.container===n||r.container===t?o.scrollTop():e(r.container).offset().top,a>=e(i).offset().top+r.threshold+e(i).height()},e.leftofbegin=function(i,r){var a;return a=r.container===n||r.container===t?o.scrollLeft():e(r.container).offset().left,a>=e(i).offset().left+r.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))}}(jQuery,window,document);